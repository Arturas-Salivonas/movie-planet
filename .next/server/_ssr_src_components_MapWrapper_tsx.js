"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_src_components_MapWrapper_tsx";
exports.ids = ["_ssr_src_components_MapWrapper_tsx"];
exports.modules = {

/***/ "(ssr)/./src/components/Map.tsx":
/*!********************************!*\
  !*** ./src/components/Map.tsx ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var maplibre_gl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! maplibre-gl */ \"(ssr)/./node_modules/maplibre-gl/dist/maplibre-gl.js\");\n/* harmony import */ var maplibre_gl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(maplibre_gl__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _utils_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/helpers */ \"(ssr)/./src/utils/helpers.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n/**\r\n * Map Component - MapLibre GL JS map with globe projection and multi-location support\r\n * Updated for Next.js - no hash routing, uses localStorage for map state\r\n */ \n\n\nconst Map = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(({ selectedMovie, onMovieSelect, searchQuery: _searchQuery, filters, focusedMovieId, onClearFocus }, ref)=>{\n    const mapContainer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const map = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [movies, setMovies] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [geojsonFeatures, setGeojsonFeatures] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const initializedRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    // Track which poster images have been loaded to prevent redundant loading\n    const loadedImagesRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Set());\n    // Loading state for progressive rendering\n    const [loadingState, setLoadingState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        isLoading: true,\n        progress: 0,\n        stage: \"Initializing...\"\n    });\n    // Expose methods to parent component\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useImperativeHandle)(ref, ()=>({\n            showAllLocationsForMovie: (movie)=>{\n                console.log(\"\\uD83D\\uDDFAï¸ Map.showAllLocationsForMovie called\", {\n                    movieId: movie.movie_id,\n                    hasMap: !!map.current,\n                    featuresLength: geojsonFeatures.length\n                });\n                if (!map.current) {\n                    console.error(\"âŒ Map not initialized\");\n                    return;\n                }\n                const feature = geojsonFeatures.find((f)=>f.properties.movie_id === movie.movie_id);\n                if (!feature) {\n                    console.error(\"âŒ Feature not found for movie\", movie.movie_id);\n                    return;\n                }\n                console.log(\"âœ… Feature found, drawing lines\", feature);\n                const coordinates = feature.geometry.type === \"MultiPoint\" ? feature.geometry.coordinates : [\n                    feature.geometry.coordinates\n                ];\n                console.log(\"\\uD83D\\uDCCD Coordinates:\", coordinates);\n                // Calculate bounds\n                const bounds = new (maplibre_gl__WEBPACK_IMPORTED_MODULE_2___default().LngLatBounds)();\n                coordinates.forEach((coord)=>bounds.extend(coord));\n                // Fit map to bounds\n                map.current.fitBounds(bounds, {\n                    padding: 100,\n                    maxZoom: 10,\n                    duration: 1000\n                });\n                // Remove existing connecting line\n                if (map.current.getLayer(\"connecting-line\")) {\n                    map.current.removeLayer(\"connecting-line\");\n                }\n                if (map.current.getSource(\"connecting-line\")) {\n                    map.current.removeSource(\"connecting-line\");\n                }\n                // Draw connecting polyline for multi-location movies\n                if (coordinates.length > 1) {\n                    console.log(\"âœ… Drawing line with\", coordinates.length, \"points\");\n                    map.current.addSource(\"connecting-line\", {\n                        type: \"geojson\",\n                        data: {\n                            type: \"Feature\",\n                            geometry: {\n                                type: \"LineString\",\n                                coordinates\n                            },\n                            properties: {}\n                        }\n                    });\n                    map.current.addLayer({\n                        id: \"connecting-line\",\n                        type: \"line\",\n                        source: \"connecting-line\",\n                        paint: {\n                            \"line-color\": \"#F59E0B\",\n                            \"line-width\": 4,\n                            \"line-opacity\": 0.9,\n                            \"line-blur\": 1\n                        }\n                    });\n                } else {\n                    console.log(\"â„¹ï¸ Only 1 location, no line needed\");\n                }\n            },\n            flyToLocation: (lat, lng)=>{\n                if (map.current) {\n                    const targetZoom = 12;\n                    map.current.setProjection({\n                        type: \"mercator\"\n                    });\n                    // Use flyTo for smooth animation in mercator with faster duration\n                    map.current.flyTo({\n                        center: [\n                            lng,\n                            lat\n                        ],\n                        zoom: targetZoom,\n                        duration: 1200,\n                        essential: true\n                    });\n                    // Wait for mercator animation to complete, then switch to globe\n                    setTimeout(()=>{\n                        if (!map.current) return;\n                        map.current.setProjection({\n                            type: \"globe\"\n                        });\n                        // Re-apply center and zoom after globe switch with easeTo for smooth transition\n                        map.current.easeTo({\n                            center: [\n                                lng,\n                                lat\n                            ],\n                            zoom: targetZoom,\n                            duration: 600,\n                            essential: true\n                        });\n                    }, 1300);\n                }\n            },\n            resetView: ()=>{\n                if (map.current) {\n                    // Remove debug marker if exists\n                    if (map.current.getSource(\"debug-marker\")) {\n                        map.current.removeLayer(\"debug-marker\");\n                        map.current.removeSource(\"debug-marker\");\n                    }\n                    // Remove connecting line if exists\n                    if (map.current.getLayer(\"connecting-line\")) {\n                        map.current.removeLayer(\"connecting-line\");\n                    }\n                    if (map.current.getSource(\"connecting-line\")) {\n                        map.current.removeSource(\"connecting-line\");\n                    }\n                    // Reset to default view (Europe centered)\n                    map.current.flyTo({\n                        center: [\n                            0.35,\n                            43\n                        ],\n                        zoom: 2.88,\n                        duration: 1500,\n                        essential: true\n                    });\n                }\n            }\n        }), [\n        geojsonFeatures\n    ]);\n    /**\r\n   * Convert GeoJSON feature to Movie object\r\n   */ const convertFeatureToMovie = (feature)=>{\n        // Extract locations from geometry\n        let locations = [];\n        if (feature.geometry.type === \"Point\") {\n            const [lng, lat] = feature.geometry.coordinates;\n            locations = [\n                {\n                    lat,\n                    lng,\n                    city: feature.properties.location_names[0]?.split(\",\")[0] || \"Unknown\",\n                    country: feature.properties.location_names[0]?.split(\",\")[1]?.trim() || \"Unknown\",\n                    description: feature.properties.location_names[0]?.match(/\\((.*?)\\)/)?.[1] || \"\"\n                }\n            ];\n        } else if (feature.geometry.type === \"MultiPoint\") {\n            const coords = feature.geometry.coordinates;\n            locations = coords.map((coord, idx)=>{\n                const [lng, lat] = coord;\n                const locationName = feature.properties.location_names[idx] || \"Unknown\";\n                const [city, country] = locationName.split(\",\").map((s)=>s.trim());\n                const description = locationName.match(/\\((.*?)\\)/)?.[1] || \"\";\n                return {\n                    lat,\n                    lng,\n                    city: city || \"Unknown\",\n                    country: country || \"Unknown\",\n                    description\n                };\n            });\n        }\n        return {\n            movie_id: feature.properties.movie_id,\n            title: feature.properties.title,\n            year: feature.properties.year,\n            imdb_id: feature.properties.movie_id,\n            tmdb_id: String(feature.properties.tmdb_id),\n            genres: feature.properties.genres || (feature.properties.top_genre ? [\n                feature.properties.top_genre\n            ] : []),\n            poster: feature.properties.poster || undefined,\n            trailer: feature.properties.trailer || undefined,\n            imdb_rating: feature.properties.imdb_rating || undefined,\n            locations\n        };\n    };\n    /**\r\n   * Load movies data and GeoJSON with progressive loading\r\n   */ (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const loadData = async ()=>{\n            try {\n                // Load GeoJSON features\n                const geojsonResponse = await fetch(\"/geo/movies.geojson\");\n                const geojsonData = await geojsonResponse.json();\n                // Store all features for filtering\n                setGeojsonFeatures(geojsonData.features);\n                // Convert all GeoJSON features to Movie objects\n                const moviesFromGeoJSON = geojsonData.features.map(convertFeatureToMovie);\n                setMovies(moviesFromGeoJSON);\n                console.log(`ðŸ“Š Loaded ${geojsonData.features.length} movies for progressive rendering`);\n            } catch (error) {\n                console.error(\"Failed to load data:\", error);\n            }\n        };\n        loadData();\n    }, []);\n    /**\r\n   * Initialize map\r\n   */ (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!mapContainer.current || map.current) return;\n        map.current = new (maplibre_gl__WEBPACK_IMPORTED_MODULE_2___default().Map)({\n            container: mapContainer.current,\n            // Use MapTiler basic style - free tier, works with globe\n            style: \"https://api.maptiler.com/maps/basic-v2/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL\",\n            zoom: 2.88,\n            center: [\n                0.35,\n                43\n            ]\n        });\n        // Globe rotation animation\n        let isUserInteracting = false;\n        let rotationAnimation = null;\n        const startRotation = ()=>{\n            if (!map.current || isUserInteracting) return;\n            const rotateCamera = (_timestamp)=>{\n                if (!map.current || isUserInteracting) return;\n                // Rotate 360 degrees over 2 minutes (120 seconds)\n                const secondsPerRevolution = 720;\n                const center = map.current.getCenter();\n                center.lng = (center.lng + 360 / secondsPerRevolution * (1 / 60)) % 360;\n                map.current.setCenter(center);\n                rotationAnimation = requestAnimationFrame(rotateCamera);\n            };\n            rotationAnimation = requestAnimationFrame(rotateCamera);\n        };\n        const stopRotation = ()=>{\n            isUserInteracting = true;\n            if (rotationAnimation !== null) {\n                cancelAnimationFrame(rotationAnimation);\n                rotationAnimation = null;\n            }\n        };\n        map.current.on(\"style.load\", ()=>{\n            if (map.current) {\n                // Set projection to globe\n                map.current.setProjection({\n                    type: \"globe\"\n                });\n                // Restore map position from localStorage (clean URLs)\n                if (false) {}\n                // Start rotation after map loads\n                setTimeout(startRotation, 1000);\n            }\n        });\n        // Save map position to localStorage on movement (debounced)\n        let saveTimeout = null;\n        const saveMapState = ()=>{\n            if (!map.current || \"undefined\" === \"undefined\") return;\n            const center = map.current.getCenter();\n            const zoom = map.current.getZoom();\n            localStorage.setItem(\"cinemap_view\", JSON.stringify({\n                lat: center.lat,\n                lng: center.lng,\n                zoom: zoom\n            }));\n        };\n        map.current.on(\"moveend\", ()=>{\n            if (saveTimeout) clearTimeout(saveTimeout);\n            saveTimeout = setTimeout(saveMapState, 500);\n        });\n        // Stop rotation on any user interaction\n        map.current.on(\"mousedown\", stopRotation);\n        map.current.on(\"touchstart\", stopRotation);\n        map.current.on(\"wheel\", stopRotation);\n        map.current.on(\"dragstart\", stopRotation);\n        // Add navigation controls\n        map.current.addControl(new (maplibre_gl__WEBPACK_IMPORTED_MODULE_2___default().NavigationControl)(), \"bottom-right\");\n        map.current.addControl(new (maplibre_gl__WEBPACK_IMPORTED_MODULE_2___default().FullscreenControl)(), \"bottom-right\");\n        // Don't add zoom listener here - it causes issues with tile loading\n        // We'll handle it differently\n        return ()=>{\n            if (map.current) {\n                map.current.remove();\n                map.current = null;\n            }\n        };\n    }, []);\n    /**\r\n   * Load and create poster image icon with movie badge\r\n   */ const createPosterIcon = async (posterPath, _movieId, _isMultiLocation)=>{\n        return new Promise((resolve)=>{\n            const size = 60 // Consistent size for all markers\n            ;\n            const canvas = document.createElement(\"canvas\");\n            canvas.width = size;\n            canvas.height = size;\n            const ctx = canvas.getContext(\"2d\");\n            // If no poster, create fallback icon\n            if (!posterPath) {\n                // Create circular background\n                ctx.beginPath();\n                ctx.arc(size / 2, size / 2, size / 2, 0, Math.PI * 2);\n                ctx.fillStyle = \"#3B82F6\";\n                ctx.fill();\n                // White border\n                ctx.strokeStyle = \"#FFFFFF\";\n                ctx.lineWidth = 3;\n                ctx.stroke();\n                // Film icon\n                ctx.fillStyle = \"#FFFFFF\";\n                ctx.font = \"bold 24px Arial\";\n                ctx.textAlign = \"center\";\n                ctx.textBaseline = \"middle\";\n                ctx.fillText(\"\\uD83C\\uDFAC\", size / 2, size / 2);\n                resolve({\n                    width: size,\n                    height: size,\n                    data: ctx.getImageData(0, 0, size, size).data\n                });\n                return;\n            }\n            // Load poster image\n            const img = new Image();\n            img.crossOrigin = \"anonymous\";\n            img.onload = ()=>{\n                // Create circular clipping mask\n                ctx.save();\n                ctx.beginPath();\n                ctx.arc(size / 2, size / 2, size / 2, 0, Math.PI * 2);\n                ctx.clip();\n                // Draw poster (centered and scaled)\n                ctx.drawImage(img, 0, 0, size, size);\n                ctx.restore();\n                // White border around circle\n                ctx.beginPath();\n                ctx.arc(size / 2, size / 2, size / 2, 0, Math.PI * 2);\n                ctx.strokeStyle = \"#10be50ff\";\n                ctx.lineWidth = 3;\n                ctx.stroke();\n                resolve({\n                    width: size,\n                    height: size,\n                    data: ctx.getImageData(0, 0, size, size).data\n                });\n            };\n            img.onerror = ()=>{\n                // Fallback on error - circular icon\n                ctx.beginPath();\n                ctx.arc(size / 2, size / 2, size / 2, 0, Math.PI * 2);\n                ctx.fillStyle = \"#3B82F6\";\n                ctx.fill();\n                ctx.strokeStyle = \"#FFFFFF\";\n                ctx.lineWidth = 3;\n                ctx.stroke();\n                // Film icon fallback\n                ctx.fillStyle = \"#FFFFFF\";\n                ctx.font = \"bold 20px Arial\";\n                ctx.textAlign = \"center\";\n                ctx.textBaseline = \"middle\";\n                ctx.fillText(\"\\uD83C\\uDFAC\", size / 2, size / 2);\n                resolve({\n                    width: size,\n                    height: size,\n                    data: ctx.getImageData(0, 0, size, size).data\n                });\n            };\n            // Use the full poster URL from the data\n            img.src = posterPath;\n        });\n    };\n    /**\r\n   * Add movie markers from GeoJSON - INITIAL LOAD ONLY\r\n   */ (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!map.current || geojsonFeatures.length === 0) return;\n        // Only run this effect once when data is first loaded\n        if (initializedRef.current || map.current.getSource(\"movies\")) return;\n        async function initializeMarkers() {\n            if (!map.current) return;\n            // Load ALL posters BEFORE adding map layer (prevents warnings)\n            const BATCH_SIZE = 20;\n            let loadedCount = 0;\n            const allFeatures = geojsonFeatures;\n            // Only show loading on initial setup, not on StrictMode re-mounts\n            if (!initializedRef.current) {\n                setLoadingState({\n                    isLoading: true,\n                    progress: 90,\n                    stage: `Loading posters... 0/${allFeatures.length}`\n                });\n            }\n            // Load posters in batches and await completion\n            for(let i = 0; i < allFeatures.length; i += BATCH_SIZE){\n                const batch = allFeatures.slice(i, i + BATCH_SIZE);\n                await Promise.all(batch.map(async (feature)=>{\n                    const movieId = feature.properties.movie_id;\n                    const posterPath = feature.properties.poster;\n                    const isMultiLocation = feature.properties.locations_count > 1;\n                    const iconName = `poster-${movieId}`;\n                    if (!map.current.hasImage(iconName)) {\n                        try {\n                            const posterIcon = await createPosterIcon(posterPath, movieId, isMultiLocation);\n                            map.current.addImage(iconName, posterIcon);\n                            loadedImagesRef.current.add(iconName) // Mark as loaded\n                            ;\n                            loadedCount++;\n                        } catch (error) {\n                            console.error(`Failed to add poster icon for ${movieId}:`, error);\n                            // Add fallback icon on error\n                            const fallbackIcon = await createPosterIcon(null, movieId, isMultiLocation);\n                            map.current.addImage(iconName, fallbackIcon);\n                            loadedImagesRef.current.add(iconName) // Mark as loaded\n                            ;\n                            loadedCount++;\n                        }\n                    } else {\n                        loadedCount++;\n                    }\n                }));\n                // Update progress after each batch\n                const progress = Math.round(loadedCount / allFeatures.length * 100);\n                setLoadingState({\n                    isLoading: true,\n                    progress: 90 + progress * 0.09,\n                    stage: `Loading posters... ${loadedCount}/${allFeatures.length}`\n                });\n            }\n            // Show rendering stage only on initial setup\n            if (!initializedRef.current) {\n                setLoadingState({\n                    isLoading: true,\n                    progress: 99,\n                    stage: \"Rendering markers...\"\n                });\n            }\n            // Convert MultiPoint features into individual Point features for each location\n            const displayFeatures = [];\n            allFeatures.forEach((feature)=>{\n                if (feature.geometry.type === \"MultiPoint\") {\n                    // Create a separate feature for each location\n                    const coords = feature.geometry.coordinates;\n                    coords.forEach((coord, index)=>{\n                        displayFeatures.push({\n                            ...feature,\n                            id: `${feature.id}-loc-${index}`,\n                            geometry: {\n                                type: \"Point\",\n                                coordinates: coord\n                            }\n                        });\n                    });\n                } else {\n                    // Single location - keep as is\n                    displayFeatures.push(feature);\n                }\n            });\n            // Create GeoJSON for display\n            const geojson = {\n                type: \"FeatureCollection\",\n                features: displayFeatures\n            };\n            // Add source - DISABLE clustering so markers stay visible\n            map.current.addSource(\"movies\", {\n                type: \"geojson\",\n                data: geojson,\n                // Clustering disabled - we want to see all markers\n                cluster: false\n            });\n            // Add all movie markers layer (now each marker represents one actual location)\n            map.current.addLayer({\n                id: \"movie-markers\",\n                type: \"symbol\",\n                source: \"movies\",\n                layout: {\n                    \"icon-image\": [\n                        \"concat\",\n                        \"poster-\",\n                        [\n                            \"get\",\n                            \"movie_id\"\n                        ]\n                    ],\n                    \"icon-size\": 0.7,\n                    \"icon-allow-overlap\": true,\n                    \"text-field\": [\n                        \"get\",\n                        \"title\"\n                    ],\n                    \"text-font\": [\n                        \"Open Sans Bold\",\n                        \"Arial Unicode MS Bold\"\n                    ],\n                    \"text-size\": 14,\n                    \"text-offset\": [\n                        0,\n                        2.8\n                    ],\n                    \"text-anchor\": \"top\",\n                    \"text-max-width\": 12,\n                    \"text-allow-overlap\": false\n                },\n                paint: {\n                    \"text-color\": \"#10be50ff\",\n                    \"text-halo-color\": \"#1F2937\",\n                    \"text-halo-width\": 2.5,\n                    \"text-halo-blur\": 1\n                }\n            });\n            // All done - hide loading screen only on initial setup\n            if (!initializedRef.current) {\n                setTimeout(()=>{\n                    setLoadingState({\n                        isLoading: false,\n                        progress: 100,\n                        stage: \"Complete\"\n                    });\n                    initializedRef.current = true;\n                }, 300) // Small delay for smooth transition\n                ;\n            }\n            // Add unified click handler for all movie markers\n            const handleMarkerClick = (e)=>{\n                if (!e.features || e.features.length === 0) return;\n                const feature = e.features[0];\n                // Try to find in geojsonFeatures by movie_id\n                const featureByMovieId = geojsonFeatures.find((f)=>f.properties.movie_id === feature.properties.movie_id);\n                if (featureByMovieId) {\n                    const movieFromFeature = convertFeatureToMovie(featureByMovieId);\n                    onMovieSelect(movieFromFeature);\n                // Don't automatically show all locations - let user click \"Show All on Map\" button\n                } else {\n                    // Last resort: create a minimal movie object\n                    const movieFromClick = {\n                        movie_id: feature.properties.movie_id,\n                        title: feature.properties.title,\n                        year: feature.properties.year,\n                        imdb_id: feature.properties.movie_id,\n                        tmdb_id: String(feature.properties.tmdb_id),\n                        genres: feature.properties.genres || (feature.properties.top_genre ? [\n                            feature.properties.top_genre\n                        ] : []),\n                        poster: feature.properties.poster || undefined,\n                        trailer: feature.properties.trailer || undefined,\n                        imdb_rating: feature.properties.imdb_rating || undefined,\n                        locations: [\n                            {\n                                lat: 0,\n                                lng: 0,\n                                city: \"Unknown\",\n                                country: \"Unknown\"\n                            }\n                        ]\n                    };\n                    onMovieSelect(movieFromClick);\n                }\n            };\n            map.current.on(\"click\", \"movie-markers\", handleMarkerClick);\n            // Clear focus when clicking on empty map (not on markers)\n            const handleMapClick = (e)=>{\n                // Only clear focus if clicking on empty space (not on markers)\n                if (!e.features || e.features.length === 0) {\n                    if (focusedMovieId && onClearFocus) {\n                        onClearFocus();\n                    }\n                }\n            };\n            map.current.on(\"click\", handleMapClick);\n            // Change cursor on hover\n            map.current.on(\"mouseenter\", \"movie-markers\", ()=>{\n                map.current.getCanvas().style.cursor = \"pointer\";\n            });\n            map.current.on(\"mouseleave\", \"movie-markers\", ()=>{\n                map.current.getCanvas().style.cursor = \"\";\n            });\n        }\n        // Wait for style to be loaded\n        if (!map.current.isStyleLoaded()) {\n            map.current.on(\"load\", ()=>{\n                initializeMarkers();\n            });\n        } else {\n            initializeMarkers();\n        }\n    }, [\n        geojsonFeatures\n    ]) // Only depend on geojsonFeatures - run once when data loads\n    ;\n    /**\r\n   * Update visible markers based on filters and focus - NO REBUILDING\r\n   */ (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!map.current || !map.current.getSource(\"movies\")) return;\n        let filteredFeatures;\n        // If a movie is focused, ONLY show that movie's markers (ignore all other filters)\n        if (focusedMovieId) {\n            filteredFeatures = geojsonFeatures.filter((f)=>f.properties.movie_id === focusedMovieId);\n        } else {\n            // Normal mode: apply search and filter logic\n            const filteredMovies = (0,_utils_helpers__WEBPACK_IMPORTED_MODULE_3__.filterMovies)(movies, filters);\n            const filteredIds = new Set(filteredMovies.map((m)=>m.movie_id));\n            filteredFeatures = movies.length > 0 ? geojsonFeatures.filter((f)=>filteredIds.has(f.properties.movie_id)) : geojsonFeatures;\n        }\n        // Convert MultiPoint features into individual Point features\n        const displayFeatures = [];\n        filteredFeatures.forEach((feature)=>{\n            if (feature.geometry.type === \"MultiPoint\") {\n                const coords = feature.geometry.coordinates;\n                coords.forEach((coord, index)=>{\n                    displayFeatures.push({\n                        ...feature,\n                        id: `${feature.id}-loc-${index}`,\n                        geometry: {\n                            type: \"Point\",\n                            coordinates: coord\n                        }\n                    });\n                });\n            } else {\n                displayFeatures.push(feature);\n            }\n        });\n        // Update the data source WITHOUT rebuilding layers - INSTANT!\n        const geojson = {\n            type: \"FeatureCollection\",\n            features: displayFeatures\n        };\n        const source = map.current.getSource(\"movies\");\n        if (source && source.setData) {\n            source.setData(geojson);\n        }\n    }, [\n        geojsonFeatures,\n        movies,\n        filters,\n        focusedMovieId\n    ]) // Update data when filters/focus change\n    ;\n    /**\r\n   * Clear connecting lines when focus is removed\r\n   */ (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!map.current) return;\n        // When focusedMovieId is cleared, remove the connecting lines\n        if (!focusedMovieId) {\n            if (map.current.getLayer(\"connecting-line\")) {\n                map.current.removeLayer(\"connecting-line\");\n            }\n            if (map.current.getSource(\"connecting-line\")) {\n                map.current.removeSource(\"connecting-line\");\n            }\n        }\n    }, [\n        focusedMovieId\n    ]);\n    /**\r\n   * Handle selected movie\r\n   */ (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!map.current || !selectedMovie) return;\n        const bounds = new (maplibre_gl__WEBPACK_IMPORTED_MODULE_2___default().LngLatBounds)();\n        selectedMovie.locations.forEach((location)=>{\n            bounds.extend([\n                location.lng,\n                location.lat\n            ]);\n        });\n        map.current.fitBounds(bounds, {\n            padding: 100,\n            duration: 1000\n        });\n    }, [\n        selectedMovie\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"map-container\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"stars-background\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Arturas\\\\Desktop\\\\cinemap\\\\src\\\\components\\\\Map.tsx\",\n                lineNumber: 788,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: mapContainer,\n                style: {\n                    width: \"100%\",\n                    height: \"100%\",\n                    position: \"relative\",\n                    zIndex: 1\n                }\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Arturas\\\\Desktop\\\\cinemap\\\\src\\\\components\\\\Map.tsx\",\n                lineNumber: 791,\n                columnNumber: 7\n            }, undefined),\n            loadingState.isLoading && !initializedRef.current && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center space-y-6 px-8\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-7xl animate-bounce\",\n                            children: \"\\uD83C\\uDFAC\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Arturas\\\\Desktop\\\\cinemap\\\\src\\\\components\\\\Map.tsx\",\n                            lineNumber: 798,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-3xl font-bold text-white\",\n                            children: \"CineMap\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Arturas\\\\Desktop\\\\cinemap\\\\src\\\\components\\\\Map.tsx\",\n                            lineNumber: 803,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-xl text-gray-300\",\n                            children: loadingState.stage\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Arturas\\\\Desktop\\\\cinemap\\\\src\\\\components\\\\Map.tsx\",\n                            lineNumber: 808,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-80 bg-gray-700 rounded-full h-3 overflow-hidden\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"bg-gradient-to-r from-primary-500 to-purple-600 h-full transition-all duration-300 ease-out\",\n                                style: {\n                                    width: `${loadingState.progress}%`\n                                }\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Arturas\\\\Desktop\\\\cinemap\\\\src\\\\components\\\\Map.tsx\",\n                                lineNumber: 814,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Arturas\\\\Desktop\\\\cinemap\\\\src\\\\components\\\\Map.tsx\",\n                            lineNumber: 813,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-sm text-gray-400 font-mono\",\n                            children: [\n                                Math.round(loadingState.progress),\n                                \"%\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\Arturas\\\\Desktop\\\\cinemap\\\\src\\\\components\\\\Map.tsx\",\n                            lineNumber: 821,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\Arturas\\\\Desktop\\\\cinemap\\\\src\\\\components\\\\Map.tsx\",\n                    lineNumber: 796,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Arturas\\\\Desktop\\\\cinemap\\\\src\\\\components\\\\Map.tsx\",\n                lineNumber: 795,\n                columnNumber: 9\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute top-20 left-4 z-10 bg-black/70 backdrop-blur-sm text-white px-4 py-2 rounded-lg shadow-xl border border-white/10\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center gap-2\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            className: \"text-2xl\",\n                            children: \"\\uD83C\\uDFAC\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Arturas\\\\Desktop\\\\cinemap\\\\src\\\\components\\\\Map.tsx\",\n                            lineNumber: 831,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-xs text-gray-300\",\n                                    children: \"Total Movies\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Arturas\\\\Desktop\\\\cinemap\\\\src\\\\components\\\\Map.tsx\",\n                                    lineNumber: 833,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-xl font-bold\",\n                                    children: movies.length\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Arturas\\\\Desktop\\\\cinemap\\\\src\\\\components\\\\Map.tsx\",\n                                    lineNumber: 834,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\Arturas\\\\Desktop\\\\cinemap\\\\src\\\\components\\\\Map.tsx\",\n                            lineNumber: 832,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\Arturas\\\\Desktop\\\\cinemap\\\\src\\\\components\\\\Map.tsx\",\n                    lineNumber: 830,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Arturas\\\\Desktop\\\\cinemap\\\\src\\\\components\\\\Map.tsx\",\n                lineNumber: 829,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\Arturas\\\\Desktop\\\\cinemap\\\\src\\\\components\\\\Map.tsx\",\n        lineNumber: 786,\n        columnNumber: 5\n    }, undefined);\n});\nMap.displayName = \"Map\";\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Map);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SzlDLDhEQUFDSTs0QkFBRUosV0FBVTtzQ0FDVmxNLGFBQWFJLEtBQUs7Ozs7OztzQ0FJckIsOERBQUM2TDs0QkFBSUMsV0FBVTtzQ0FDYiw0RUFBQ0Q7Z0NBQ0NDLFdBQVU7Z0NBQ1Y1RyxPQUFPO29DQUFFd0MsT0FBTyxDQUFDLEVBQUU5SCxhQUFhRyxRQUFRLENBQUMsQ0FBQyxDQUFDO2dDQUFDOzs7Ozs7Ozs7OztzQ0FLaEQsOERBQUNtTTs0QkFBRUosV0FBVTs7Z0NBQ1Y5RCxLQUFLc0MsS0FBSyxDQUFDMUssYUFBYUcsUUFBUTtnQ0FBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7OzBCQU8zQyw4REFBQzhMO2dCQUFJQyxXQUFVOzBCQUNiLDRFQUFDRDtvQkFBSUMsV0FBVTs7c0NBQ2IsOERBQUNLOzRCQUFLTCxXQUFVO3NDQUFXOzs7Ozs7c0NBQzNCLDhEQUFDRDs7OENBQ0MsOERBQUNLO29DQUFFSixXQUFVOzhDQUF3Qjs7Ozs7OzhDQUNyQyw4REFBQ0k7b0NBQUVKLFdBQVU7OENBQ1Z6TSxPQUFPcUIsTUFBTTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPNUI7QUFFQWhDLElBQUkwTixXQUFXLEdBQUc7QUFFbEIsaUVBQWUxTixHQUFHQSxFQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2luZW1hcC8uL3NyYy9jb21wb25lbnRzL01hcC50c3g/YjE2NSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcclxuXHJcbi8qKlxyXG4gKiBNYXAgQ29tcG9uZW50IC0gTWFwTGlicmUgR0wgSlMgbWFwIHdpdGggZ2xvYmUgcHJvamVjdGlvbiBhbmQgbXVsdGktbG9jYXRpb24gc3VwcG9ydFxyXG4gKiBVcGRhdGVkIGZvciBOZXh0LmpzIC0gbm8gaGFzaCByb3V0aW5nLCB1c2VzIGxvY2FsU3RvcmFnZSBmb3IgbWFwIHN0YXRlXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlLCB1c2VJbXBlcmF0aXZlSGFuZGxlLCBmb3J3YXJkUmVmIH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCBtYXBsaWJyZWdsIGZyb20gJ21hcGxpYnJlLWdsJ1xyXG5pbXBvcnQgdHlwZSB7IE1vdmllLCBGaWx0ZXJTdGF0ZSwgTG9jYXRpb24gfSBmcm9tICcuLi90eXBlcydcclxuaW1wb3J0IHsgZmlsdGVyTW92aWVzIH0gZnJvbSAnLi4vdXRpbHMvaGVscGVycydcclxuXHJcbmludGVyZmFjZSBNYXBQcm9wcyB7XHJcbiAgc2VsZWN0ZWRNb3ZpZTogTW92aWUgfCBudWxsXHJcbiAgb25Nb3ZpZVNlbGVjdDogKG1vdmllOiBNb3ZpZSB8IG51bGwpID0+IHZvaWRcclxuICBzZWFyY2hRdWVyeTogc3RyaW5nXHJcbiAgZmlsdGVyczogRmlsdGVyU3RhdGVcclxuICBmb2N1c2VkTW92aWVJZD86IHN0cmluZyB8IG51bGxcclxuICBvbkNsZWFyRm9jdXM/OiAoKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWFwUmVmIHtcclxuICBzaG93QWxsTG9jYXRpb25zRm9yTW92aWU6IChtb3ZpZTogTW92aWUpID0+IHZvaWRcclxuICBmbHlUb0xvY2F0aW9uOiAobGF0OiBudW1iZXIsIGxuZzogbnVtYmVyKSA9PiB2b2lkXHJcbiAgcmVzZXRWaWV3OiAoKSA9PiB2b2lkXHJcbn1cclxuXHJcbmludGVyZmFjZSBHZW9KU09ORmVhdHVyZSB7XHJcbiAgdHlwZTogJ0ZlYXR1cmUnXHJcbiAgaWQ6IHN0cmluZ1xyXG4gIGdlb21ldHJ5OiB7XHJcbiAgICB0eXBlOiAnUG9pbnQnIHwgJ011bHRpUG9pbnQnXHJcbiAgICBjb29yZGluYXRlczogbnVtYmVyW10gfCBudW1iZXJbXVtdXHJcbiAgfVxyXG4gIHByb3BlcnRpZXM6IHtcclxuICAgIG1vdmllX2lkOiBzdHJpbmdcclxuICAgIHRtZGJfaWQ6IG51bWJlclxyXG4gICAgdGl0bGU6IHN0cmluZ1xyXG4gICAgeWVhcjogbnVtYmVyXHJcbiAgICBwb3N0ZXI6IHN0cmluZyB8IG51bGxcclxuICAgIHRyYWlsZXI6IHN0cmluZyB8IG51bGxcclxuICAgIHRvcF9nZW5yZTogc3RyaW5nIHwgbnVsbFxyXG4gICAgZ2VucmVzPzogc3RyaW5nW11cclxuICAgIHNob3J0X2Rlc2NyaXB0aW9uOiBzdHJpbmdcclxuICAgIGltZGJfcmF0aW5nOiBudW1iZXIgfCBudWxsXHJcbiAgICBsb2NhdGlvbnNfY291bnQ6IG51bWJlclxyXG4gICAgbG9jYXRpb25fbmFtZXM6IHN0cmluZ1tdXHJcbiAgICBoYXNfdGltZWxpbmU6IGJvb2xlYW5cclxuICAgIGNlbnRyb2lkPzogW251bWJlciwgbnVtYmVyXVxyXG4gIH1cclxufVxyXG5cclxuY29uc3QgTWFwID0gZm9yd2FyZFJlZjxNYXBSZWYsIE1hcFByb3BzPigoe1xyXG4gIHNlbGVjdGVkTW92aWUsXHJcbiAgb25Nb3ZpZVNlbGVjdCxcclxuICBzZWFyY2hRdWVyeTogX3NlYXJjaFF1ZXJ5LFxyXG4gIGZpbHRlcnMsXHJcbiAgZm9jdXNlZE1vdmllSWQsXHJcbiAgb25DbGVhckZvY3VzLFxyXG59LCByZWYpID0+IHtcclxuICBjb25zdCBtYXBDb250YWluZXIgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpXHJcbiAgY29uc3QgbWFwID0gdXNlUmVmPG1hcGxpYnJlZ2wuTWFwIHwgbnVsbD4obnVsbClcclxuICBjb25zdCBbbW92aWVzLCBzZXRNb3ZpZXNdID0gdXNlU3RhdGU8TW92aWVbXT4oW10pXHJcbiAgY29uc3QgW2dlb2pzb25GZWF0dXJlcywgc2V0R2VvanNvbkZlYXR1cmVzXSA9IHVzZVN0YXRlPEdlb0pTT05GZWF0dXJlW10+KFtdKVxyXG4gIGNvbnN0IGluaXRpYWxpemVkUmVmID0gdXNlUmVmPGJvb2xlYW4+KGZhbHNlKVxyXG5cclxuICAvLyBUcmFjayB3aGljaCBwb3N0ZXIgaW1hZ2VzIGhhdmUgYmVlbiBsb2FkZWQgdG8gcHJldmVudCByZWR1bmRhbnQgbG9hZGluZ1xyXG4gIGNvbnN0IGxvYWRlZEltYWdlc1JlZiA9IHVzZVJlZjxTZXQ8c3RyaW5nPj4obmV3IFNldCgpKVxyXG5cclxuICAvLyBMb2FkaW5nIHN0YXRlIGZvciBwcm9ncmVzc2l2ZSByZW5kZXJpbmdcclxuICBjb25zdCBbbG9hZGluZ1N0YXRlLCBzZXRMb2FkaW5nU3RhdGVdID0gdXNlU3RhdGU8e1xyXG4gICAgaXNMb2FkaW5nOiBib29sZWFuXHJcbiAgICBwcm9ncmVzczogbnVtYmVyXHJcbiAgICBzdGFnZTogc3RyaW5nXHJcbiAgfT4oe1xyXG4gICAgaXNMb2FkaW5nOiB0cnVlLFxyXG4gICAgcHJvZ3Jlc3M6IDAsXHJcbiAgICBzdGFnZTogJ0luaXRpYWxpemluZy4uLidcclxuICB9KVxyXG5cclxuICAvLyBFeHBvc2UgbWV0aG9kcyB0byBwYXJlbnQgY29tcG9uZW50XHJcbiAgdXNlSW1wZXJhdGl2ZUhhbmRsZShyZWYsICgpID0+ICh7XHJcbiAgICBzaG93QWxsTG9jYXRpb25zRm9yTW92aWU6IChtb3ZpZTogTW92aWUpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coJ/Cfl7rvuI8gTWFwLnNob3dBbGxMb2NhdGlvbnNGb3JNb3ZpZSBjYWxsZWQnLCB7XHJcbiAgICAgICAgbW92aWVJZDogbW92aWUubW92aWVfaWQsXHJcbiAgICAgICAgaGFzTWFwOiAhIW1hcC5jdXJyZW50LFxyXG4gICAgICAgIGZlYXR1cmVzTGVuZ3RoOiBnZW9qc29uRmVhdHVyZXMubGVuZ3RoXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBpZiAoIW1hcC5jdXJyZW50KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIE1hcCBub3QgaW5pdGlhbGl6ZWQnKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBmZWF0dXJlID0gZ2VvanNvbkZlYXR1cmVzLmZpbmQoZiA9PiBmLnByb3BlcnRpZXMubW92aWVfaWQgPT09IG1vdmllLm1vdmllX2lkKVxyXG4gICAgICBpZiAoIWZlYXR1cmUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRmVhdHVyZSBub3QgZm91bmQgZm9yIG1vdmllJywgbW92aWUubW92aWVfaWQpXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgRmVhdHVyZSBmb3VuZCwgZHJhd2luZyBsaW5lcycsIGZlYXR1cmUpXHJcblxyXG4gICAgICBjb25zdCBjb29yZGluYXRlcyA9IGZlYXR1cmUuZ2VvbWV0cnkudHlwZSA9PT0gJ011bHRpUG9pbnQnXHJcbiAgICAgICAgPyBmZWF0dXJlLmdlb21ldHJ5LmNvb3JkaW5hdGVzIGFzIG51bWJlcltdW11cclxuICAgICAgICA6IFtmZWF0dXJlLmdlb21ldHJ5LmNvb3JkaW5hdGVzIGFzIG51bWJlcltdXVxyXG5cclxuICAgICAgY29uc29sZS5sb2coJ/Cfk40gQ29vcmRpbmF0ZXM6JywgY29vcmRpbmF0ZXMpXHJcblxyXG4gICAgICAvLyBDYWxjdWxhdGUgYm91bmRzXHJcbiAgICAgIGNvbnN0IGJvdW5kcyA9IG5ldyBtYXBsaWJyZWdsLkxuZ0xhdEJvdW5kcygpXHJcbiAgICAgIGNvb3JkaW5hdGVzLmZvckVhY2goY29vcmQgPT4gYm91bmRzLmV4dGVuZChjb29yZCBhcyBbbnVtYmVyLCBudW1iZXJdKSlcclxuXHJcbiAgICAgIC8vIEZpdCBtYXAgdG8gYm91bmRzXHJcbiAgICAgIG1hcC5jdXJyZW50LmZpdEJvdW5kcyhib3VuZHMsIHtcclxuICAgICAgICBwYWRkaW5nOiAxMDAsXHJcbiAgICAgICAgbWF4Wm9vbTogMTAsXHJcbiAgICAgICAgZHVyYXRpb246IDEwMDBcclxuICAgICAgfSlcclxuXHJcbiAgICAgIC8vIFJlbW92ZSBleGlzdGluZyBjb25uZWN0aW5nIGxpbmVcclxuICAgICAgaWYgKG1hcC5jdXJyZW50LmdldExheWVyKCdjb25uZWN0aW5nLWxpbmUnKSkge1xyXG4gICAgICAgIG1hcC5jdXJyZW50LnJlbW92ZUxheWVyKCdjb25uZWN0aW5nLWxpbmUnKVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChtYXAuY3VycmVudC5nZXRTb3VyY2UoJ2Nvbm5lY3RpbmctbGluZScpKSB7XHJcbiAgICAgICAgbWFwLmN1cnJlbnQucmVtb3ZlU291cmNlKCdjb25uZWN0aW5nLWxpbmUnKVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBEcmF3IGNvbm5lY3RpbmcgcG9seWxpbmUgZm9yIG11bHRpLWxvY2F0aW9uIG1vdmllc1xyXG4gICAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgRHJhd2luZyBsaW5lIHdpdGgnLCBjb29yZGluYXRlcy5sZW5ndGgsICdwb2ludHMnKVxyXG4gICAgICAgIG1hcC5jdXJyZW50LmFkZFNvdXJjZSgnY29ubmVjdGluZy1saW5lJywge1xyXG4gICAgICAgICAgdHlwZTogJ2dlb2pzb24nLFxyXG4gICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICB0eXBlOiAnRmVhdHVyZScsXHJcbiAgICAgICAgICAgIGdlb21ldHJ5OiB7XHJcbiAgICAgICAgICAgICAgdHlwZTogJ0xpbmVTdHJpbmcnLFxyXG4gICAgICAgICAgICAgIGNvb3JkaW5hdGVzXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHt9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgbWFwLmN1cnJlbnQuYWRkTGF5ZXIoe1xyXG4gICAgICAgICAgaWQ6ICdjb25uZWN0aW5nLWxpbmUnLFxyXG4gICAgICAgICAgdHlwZTogJ2xpbmUnLFxyXG4gICAgICAgICAgc291cmNlOiAnY29ubmVjdGluZy1saW5lJyxcclxuICAgICAgICAgIHBhaW50OiB7XHJcbiAgICAgICAgICAgICdsaW5lLWNvbG9yJzogJyNGNTlFMEInLFxyXG4gICAgICAgICAgICAnbGluZS13aWR0aCc6IDQsXHJcbiAgICAgICAgICAgICdsaW5lLW9wYWNpdHknOiAwLjksXHJcbiAgICAgICAgICAgICdsaW5lLWJsdXInOiAxXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygn4oS577iPIE9ubHkgMSBsb2NhdGlvbiwgbm8gbGluZSBuZWVkZWQnKVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgZmx5VG9Mb2NhdGlvbjogKGxhdDogbnVtYmVyLCBsbmc6IG51bWJlcikgPT4ge1xyXG4gICAgICBpZiAobWFwLmN1cnJlbnQpIHtcclxuICAgICAgICBjb25zdCB0YXJnZXRab29tID0gMTJcclxuXHJcbiAgICAgICAgLy8gVGVtcG9yYXJpbHkgc3dpdGNoIHRvIG1lcmNhdG9yIHByb2plY3Rpb24gZm9yIGFjY3VyYXRlIHBvc2l0aW9uaW5nXHJcbiAgICAgICAgOyhtYXAuY3VycmVudCBhcyBhbnkpLnNldFByb2plY3Rpb24oeyB0eXBlOiAnbWVyY2F0b3InIH0pXHJcblxyXG4gICAgICAgIC8vIFVzZSBmbHlUbyBmb3Igc21vb3RoIGFuaW1hdGlvbiBpbiBtZXJjYXRvciB3aXRoIGZhc3RlciBkdXJhdGlvblxyXG4gICAgICAgIG1hcC5jdXJyZW50LmZseVRvKHtcclxuICAgICAgICAgIGNlbnRlcjogW2xuZywgbGF0XSxcclxuICAgICAgICAgIHpvb206IHRhcmdldFpvb20sXHJcbiAgICAgICAgICBkdXJhdGlvbjogMTIwMCxcclxuICAgICAgICAgIGVzc2VudGlhbDogdHJ1ZVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC8vIFdhaXQgZm9yIG1lcmNhdG9yIGFuaW1hdGlvbiB0byBjb21wbGV0ZSwgdGhlbiBzd2l0Y2ggdG8gZ2xvYmVcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIGlmICghbWFwLmN1cnJlbnQpIHJldHVyblxyXG5cclxuICAgICAgICAgIC8vIFN3aXRjaCBiYWNrIHRvIGdsb2JlIHByb2plY3Rpb25cclxuICAgICAgICAgIDsobWFwLmN1cnJlbnQgYXMgYW55KS5zZXRQcm9qZWN0aW9uKHsgdHlwZTogJ2dsb2JlJyB9KVxyXG5cclxuICAgICAgICAgIC8vIFJlLWFwcGx5IGNlbnRlciBhbmQgem9vbSBhZnRlciBnbG9iZSBzd2l0Y2ggd2l0aCBlYXNlVG8gZm9yIHNtb290aCB0cmFuc2l0aW9uXHJcbiAgICAgICAgICBtYXAuY3VycmVudC5lYXNlVG8oe1xyXG4gICAgICAgICAgICBjZW50ZXI6IFtsbmcsIGxhdF0sXHJcbiAgICAgICAgICAgIHpvb206IHRhcmdldFpvb20sXHJcbiAgICAgICAgICAgIGR1cmF0aW9uOiA2MDAsXHJcbiAgICAgICAgICAgIGVzc2VudGlhbDogdHJ1ZVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9LCAxMzAwKVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgcmVzZXRWaWV3OiAoKSA9PiB7XHJcbiAgICAgIGlmIChtYXAuY3VycmVudCkge1xyXG4gICAgICAgIC8vIFJlbW92ZSBkZWJ1ZyBtYXJrZXIgaWYgZXhpc3RzXHJcbiAgICAgICAgaWYgKG1hcC5jdXJyZW50LmdldFNvdXJjZSgnZGVidWctbWFya2VyJykpIHtcclxuICAgICAgICAgIG1hcC5jdXJyZW50LnJlbW92ZUxheWVyKCdkZWJ1Zy1tYXJrZXInKVxyXG4gICAgICAgICAgbWFwLmN1cnJlbnQucmVtb3ZlU291cmNlKCdkZWJ1Zy1tYXJrZXInKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIGNvbm5lY3RpbmcgbGluZSBpZiBleGlzdHNcclxuICAgICAgICBpZiAobWFwLmN1cnJlbnQuZ2V0TGF5ZXIoJ2Nvbm5lY3RpbmctbGluZScpKSB7XHJcbiAgICAgICAgICBtYXAuY3VycmVudC5yZW1vdmVMYXllcignY29ubmVjdGluZy1saW5lJylcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1hcC5jdXJyZW50LmdldFNvdXJjZSgnY29ubmVjdGluZy1saW5lJykpIHtcclxuICAgICAgICAgIG1hcC5jdXJyZW50LnJlbW92ZVNvdXJjZSgnY29ubmVjdGluZy1saW5lJylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlc2V0IHRvIGRlZmF1bHQgdmlldyAoRXVyb3BlIGNlbnRlcmVkKVxyXG4gICAgICAgIG1hcC5jdXJyZW50LmZseVRvKHtcclxuICAgICAgICAgIGNlbnRlcjogWzAuMzUsIDQzXSxcclxuICAgICAgICAgIHpvb206IDIuODgsXHJcbiAgICAgICAgICBkdXJhdGlvbjogMTUwMCxcclxuICAgICAgICAgIGVzc2VudGlhbDogdHJ1ZVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KSwgW2dlb2pzb25GZWF0dXJlc10pXHJcblxyXG4gIC8qKlxyXG4gICAqIENvbnZlcnQgR2VvSlNPTiBmZWF0dXJlIHRvIE1vdmllIG9iamVjdFxyXG4gICAqL1xyXG4gIGNvbnN0IGNvbnZlcnRGZWF0dXJlVG9Nb3ZpZSA9IChmZWF0dXJlOiBHZW9KU09ORmVhdHVyZSk6IE1vdmllID0+IHtcclxuICAgIC8vIEV4dHJhY3QgbG9jYXRpb25zIGZyb20gZ2VvbWV0cnlcclxuICAgIGxldCBsb2NhdGlvbnM6IExvY2F0aW9uW10gPSBbXVxyXG5cclxuICAgIGlmIChmZWF0dXJlLmdlb21ldHJ5LnR5cGUgPT09ICdQb2ludCcpIHtcclxuICAgICAgY29uc3QgW2xuZywgbGF0XSA9IGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXMgYXMgbnVtYmVyW11cclxuICAgICAgbG9jYXRpb25zID0gW3tcclxuICAgICAgICBsYXQsXHJcbiAgICAgICAgbG5nLFxyXG4gICAgICAgIGNpdHk6IGZlYXR1cmUucHJvcGVydGllcy5sb2NhdGlvbl9uYW1lc1swXT8uc3BsaXQoJywnKVswXSB8fCAnVW5rbm93bicsXHJcbiAgICAgICAgY291bnRyeTogZmVhdHVyZS5wcm9wZXJ0aWVzLmxvY2F0aW9uX25hbWVzWzBdPy5zcGxpdCgnLCcpWzFdPy50cmltKCkgfHwgJ1Vua25vd24nLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBmZWF0dXJlLnByb3BlcnRpZXMubG9jYXRpb25fbmFtZXNbMF0/Lm1hdGNoKC9cXCgoLio/KVxcKS8pPy5bMV0gfHwgJydcclxuICAgICAgfV1cclxuICAgIH0gZWxzZSBpZiAoZmVhdHVyZS5nZW9tZXRyeS50eXBlID09PSAnTXVsdGlQb2ludCcpIHtcclxuICAgICAgY29uc3QgY29vcmRzID0gZmVhdHVyZS5nZW9tZXRyeS5jb29yZGluYXRlcyBhcyBudW1iZXJbXVtdXHJcbiAgICAgIGxvY2F0aW9ucyA9IGNvb3Jkcy5tYXAoKGNvb3JkLCBpZHgpID0+IHtcclxuICAgICAgICBjb25zdCBbbG5nLCBsYXRdID0gY29vcmRcclxuICAgICAgICBjb25zdCBsb2NhdGlvbk5hbWUgPSBmZWF0dXJlLnByb3BlcnRpZXMubG9jYXRpb25fbmFtZXNbaWR4XSB8fCAnVW5rbm93bidcclxuICAgICAgICBjb25zdCBbY2l0eSwgY291bnRyeV0gPSBsb2NhdGlvbk5hbWUuc3BsaXQoJywnKS5tYXAocyA9PiBzLnRyaW0oKSlcclxuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGxvY2F0aW9uTmFtZS5tYXRjaCgvXFwoKC4qPylcXCkvKT8uWzFdIHx8ICcnXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGxhdCxcclxuICAgICAgICAgIGxuZyxcclxuICAgICAgICAgIGNpdHk6IGNpdHkgfHwgJ1Vua25vd24nLFxyXG4gICAgICAgICAgY291bnRyeTogY291bnRyeSB8fCAnVW5rbm93bicsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvblxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBtb3ZpZV9pZDogZmVhdHVyZS5wcm9wZXJ0aWVzLm1vdmllX2lkLFxyXG4gICAgICB0aXRsZTogZmVhdHVyZS5wcm9wZXJ0aWVzLnRpdGxlLFxyXG4gICAgICB5ZWFyOiBmZWF0dXJlLnByb3BlcnRpZXMueWVhcixcclxuICAgICAgaW1kYl9pZDogZmVhdHVyZS5wcm9wZXJ0aWVzLm1vdmllX2lkLFxyXG4gICAgICB0bWRiX2lkOiBTdHJpbmcoZmVhdHVyZS5wcm9wZXJ0aWVzLnRtZGJfaWQpLFxyXG4gICAgICBnZW5yZXM6IGZlYXR1cmUucHJvcGVydGllcy5nZW5yZXMgfHwgKGZlYXR1cmUucHJvcGVydGllcy50b3BfZ2VucmUgPyBbZmVhdHVyZS5wcm9wZXJ0aWVzLnRvcF9nZW5yZV0gOiBbXSksXHJcbiAgICAgIHBvc3RlcjogZmVhdHVyZS5wcm9wZXJ0aWVzLnBvc3RlciB8fCB1bmRlZmluZWQsXHJcbiAgICAgIHRyYWlsZXI6IGZlYXR1cmUucHJvcGVydGllcy50cmFpbGVyIHx8IHVuZGVmaW5lZCxcclxuICAgICAgaW1kYl9yYXRpbmc6IGZlYXR1cmUucHJvcGVydGllcy5pbWRiX3JhdGluZyB8fCB1bmRlZmluZWQsXHJcbiAgICAgIGxvY2F0aW9ucyxcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIExvYWQgbW92aWVzIGRhdGEgYW5kIEdlb0pTT04gd2l0aCBwcm9ncmVzc2l2ZSBsb2FkaW5nXHJcbiAgICovXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGxvYWREYXRhID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIExvYWQgR2VvSlNPTiBmZWF0dXJlc1xyXG4gICAgICAgIGNvbnN0IGdlb2pzb25SZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvZ2VvL21vdmllcy5nZW9qc29uJylcclxuICAgICAgICBjb25zdCBnZW9qc29uRGF0YSA9IGF3YWl0IGdlb2pzb25SZXNwb25zZS5qc29uKClcclxuXHJcbiAgICAgICAgLy8gU3RvcmUgYWxsIGZlYXR1cmVzIGZvciBmaWx0ZXJpbmdcclxuICAgICAgICBzZXRHZW9qc29uRmVhdHVyZXMoZ2VvanNvbkRhdGEuZmVhdHVyZXMpXHJcblxyXG4gICAgICAgIC8vIENvbnZlcnQgYWxsIEdlb0pTT04gZmVhdHVyZXMgdG8gTW92aWUgb2JqZWN0c1xyXG4gICAgICAgIGNvbnN0IG1vdmllc0Zyb21HZW9KU09OOiBNb3ZpZVtdID0gZ2VvanNvbkRhdGEuZmVhdHVyZXMubWFwKGNvbnZlcnRGZWF0dXJlVG9Nb3ZpZSlcclxuICAgICAgICBzZXRNb3ZpZXMobW92aWVzRnJvbUdlb0pTT04pXHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5OKIExvYWRlZCAke2dlb2pzb25EYXRhLmZlYXR1cmVzLmxlbmd0aH0gbW92aWVzIGZvciBwcm9ncmVzc2l2ZSByZW5kZXJpbmdgKVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGRhdGE6JywgZXJyb3IpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGxvYWREYXRhKClcclxuICB9LCBbXSlcclxuXHJcbiAgLyoqXHJcbiAgICogSW5pdGlhbGl6ZSBtYXBcclxuICAgKi9cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCFtYXBDb250YWluZXIuY3VycmVudCB8fCBtYXAuY3VycmVudCkgcmV0dXJuXHJcblxyXG4gICAgbWFwLmN1cnJlbnQgPSBuZXcgbWFwbGlicmVnbC5NYXAoe1xyXG4gICAgICBjb250YWluZXI6IG1hcENvbnRhaW5lci5jdXJyZW50LFxyXG4gICAgICAvLyBVc2UgTWFwVGlsZXIgYmFzaWMgc3R5bGUgLSBmcmVlIHRpZXIsIHdvcmtzIHdpdGggZ2xvYmVcclxuICAgICAgc3R5bGU6ICdodHRwczovL2FwaS5tYXB0aWxlci5jb20vbWFwcy9iYXNpYy12Mi9zdHlsZS5qc29uP2tleT1nZXRfeW91cl9vd25fT3BJaTlaVUxOSHpyRVN2NlQydkwnLFxyXG4gICAgICB6b29tOiAyLjg4LFxyXG4gICAgICBjZW50ZXI6IFswLjM1LCA0M10sIC8vIENlbnRlcmVkIG9uIEV1cm9wZVxyXG4gICAgICAvLyBoYXNoOiB0cnVlIC8vIFJlbW92ZWQgZm9yIE5leHQuanMgLSB1c2luZyBsb2NhbFN0b3JhZ2UgZm9yIGNsZWFuIFVSTHNcclxuICAgIH0pXHJcblxyXG4gICAgLy8gR2xvYmUgcm90YXRpb24gYW5pbWF0aW9uXHJcbiAgICBsZXQgaXNVc2VySW50ZXJhY3RpbmcgPSBmYWxzZVxyXG4gICAgbGV0IHJvdGF0aW9uQW5pbWF0aW9uOiBudW1iZXIgfCBudWxsID0gbnVsbFxyXG5cclxuICAgIGNvbnN0IHN0YXJ0Um90YXRpb24gPSAoKSA9PiB7XHJcbiAgICAgIGlmICghbWFwLmN1cnJlbnQgfHwgaXNVc2VySW50ZXJhY3RpbmcpIHJldHVyblxyXG5cclxuICAgICAgY29uc3Qgcm90YXRlQ2FtZXJhID0gKF90aW1lc3RhbXA6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGlmICghbWFwLmN1cnJlbnQgfHwgaXNVc2VySW50ZXJhY3RpbmcpIHJldHVyblxyXG5cclxuICAgICAgICAvLyBSb3RhdGUgMzYwIGRlZ3JlZXMgb3ZlciAyIG1pbnV0ZXMgKDEyMCBzZWNvbmRzKVxyXG4gICAgICAgIGNvbnN0IHNlY29uZHNQZXJSZXZvbHV0aW9uID0gNzIwXHJcbiAgICAgICAgY29uc3QgY2VudGVyID0gbWFwLmN1cnJlbnQuZ2V0Q2VudGVyKClcclxuICAgICAgICBjZW50ZXIubG5nID0gKGNlbnRlci5sbmcgKyAoMzYwIC8gc2Vjb25kc1BlclJldm9sdXRpb24pICogKDEvNjApKSAlIDM2MFxyXG4gICAgICAgIG1hcC5jdXJyZW50LnNldENlbnRlcihjZW50ZXIpXHJcblxyXG4gICAgICAgIHJvdGF0aW9uQW5pbWF0aW9uID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJvdGF0ZUNhbWVyYSlcclxuICAgICAgfVxyXG5cclxuICAgICAgcm90YXRpb25BbmltYXRpb24gPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocm90YXRlQ2FtZXJhKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHN0b3BSb3RhdGlvbiA9ICgpID0+IHtcclxuICAgICAgaXNVc2VySW50ZXJhY3RpbmcgPSB0cnVlXHJcbiAgICAgIGlmIChyb3RhdGlvbkFuaW1hdGlvbiAhPT0gbnVsbCkge1xyXG4gICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJvdGF0aW9uQW5pbWF0aW9uKVxyXG4gICAgICAgIHJvdGF0aW9uQW5pbWF0aW9uID0gbnVsbFxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbWFwLmN1cnJlbnQub24oJ3N0eWxlLmxvYWQnLCAoKSA9PiB7XHJcbiAgICAgIGlmIChtYXAuY3VycmVudCkge1xyXG4gICAgICAgIC8vIFNldCBwcm9qZWN0aW9uIHRvIGdsb2JlXHJcbiAgICAgICAgKG1hcC5jdXJyZW50IGFzIGFueSkuc2V0UHJvamVjdGlvbih7XHJcbiAgICAgICAgICB0eXBlOiAnZ2xvYmUnLFxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC8vIFJlc3RvcmUgbWFwIHBvc2l0aW9uIGZyb20gbG9jYWxTdG9yYWdlIChjbGVhbiBVUkxzKVxyXG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgY29uc3Qgc2F2ZWRTdGF0ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjaW5lbWFwX3ZpZXcnKVxyXG4gICAgICAgICAgaWYgKHNhdmVkU3RhdGUpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBjb25zdCB7IGxhdCwgbG5nLCB6b29tIH0gPSBKU09OLnBhcnNlKHNhdmVkU3RhdGUpXHJcbiAgICAgICAgICAgICAgbWFwLmN1cnJlbnQuc2V0Q2VudGVyKFtsbmcsIGxhdF0pXHJcbiAgICAgICAgICAgICAgbWFwLmN1cnJlbnQuc2V0Wm9vbSh6b29tKVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgLy8gSWdub3JlIGludmFsaWQgc3RvcmVkIHN0YXRlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFN0YXJ0IHJvdGF0aW9uIGFmdGVyIG1hcCBsb2Fkc1xyXG4gICAgICAgIHNldFRpbWVvdXQoc3RhcnRSb3RhdGlvbiwgMTAwMClcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBTYXZlIG1hcCBwb3NpdGlvbiB0byBsb2NhbFN0b3JhZ2Ugb24gbW92ZW1lbnQgKGRlYm91bmNlZClcclxuICAgIGxldCBzYXZlVGltZW91dDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbFxyXG4gICAgY29uc3Qgc2F2ZU1hcFN0YXRlID0gKCkgPT4ge1xyXG4gICAgICBpZiAoIW1hcC5jdXJyZW50IHx8IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm5cclxuICAgICAgY29uc3QgY2VudGVyID0gbWFwLmN1cnJlbnQuZ2V0Q2VudGVyKClcclxuICAgICAgY29uc3Qgem9vbSA9IG1hcC5jdXJyZW50LmdldFpvb20oKVxyXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2luZW1hcF92aWV3JywgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGxhdDogY2VudGVyLmxhdCxcclxuICAgICAgICBsbmc6IGNlbnRlci5sbmcsXHJcbiAgICAgICAgem9vbTogem9vbVxyXG4gICAgICB9KSlcclxuICAgIH1cclxuXHJcbiAgICBtYXAuY3VycmVudC5vbignbW92ZWVuZCcsICgpID0+IHtcclxuICAgICAgaWYgKHNhdmVUaW1lb3V0KSBjbGVhclRpbWVvdXQoc2F2ZVRpbWVvdXQpXHJcbiAgICAgIHNhdmVUaW1lb3V0ID0gc2V0VGltZW91dChzYXZlTWFwU3RhdGUsIDUwMClcclxuICAgIH0pXHJcblxyXG4gICAgLy8gU3RvcCByb3RhdGlvbiBvbiBhbnkgdXNlciBpbnRlcmFjdGlvblxyXG4gICAgbWFwLmN1cnJlbnQub24oJ21vdXNlZG93bicsIHN0b3BSb3RhdGlvbilcclxuICAgIG1hcC5jdXJyZW50Lm9uKCd0b3VjaHN0YXJ0Jywgc3RvcFJvdGF0aW9uKVxyXG4gICAgbWFwLmN1cnJlbnQub24oJ3doZWVsJywgc3RvcFJvdGF0aW9uKVxyXG4gICAgbWFwLmN1cnJlbnQub24oJ2RyYWdzdGFydCcsIHN0b3BSb3RhdGlvbilcclxuXHJcbiAgICAvLyBBZGQgbmF2aWdhdGlvbiBjb250cm9sc1xyXG4gICAgbWFwLmN1cnJlbnQuYWRkQ29udHJvbChuZXcgbWFwbGlicmVnbC5OYXZpZ2F0aW9uQ29udHJvbCgpLCAnYm90dG9tLXJpZ2h0JylcclxuICAgIG1hcC5jdXJyZW50LmFkZENvbnRyb2wobmV3IG1hcGxpYnJlZ2wuRnVsbHNjcmVlbkNvbnRyb2woKSwgJ2JvdHRvbS1yaWdodCcpXHJcblxyXG4gICAgLy8gRG9uJ3QgYWRkIHpvb20gbGlzdGVuZXIgaGVyZSAtIGl0IGNhdXNlcyBpc3N1ZXMgd2l0aCB0aWxlIGxvYWRpbmdcclxuICAgIC8vIFdlJ2xsIGhhbmRsZSBpdCBkaWZmZXJlbnRseVxyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGlmIChtYXAuY3VycmVudCkge1xyXG4gICAgICAgIG1hcC5jdXJyZW50LnJlbW92ZSgpXHJcbiAgICAgICAgbWFwLmN1cnJlbnQgPSBudWxsXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCBbXSlcclxuXHJcbiAgLyoqXHJcbiAgICogTG9hZCBhbmQgY3JlYXRlIHBvc3RlciBpbWFnZSBpY29uIHdpdGggbW92aWUgYmFkZ2VcclxuICAgKi9cclxuICBjb25zdCBjcmVhdGVQb3N0ZXJJY29uID0gYXN5bmMgKHBvc3RlclBhdGg6IHN0cmluZyB8IG51bGwsIF9tb3ZpZUlkOiBzdHJpbmcsIF9pc011bHRpTG9jYXRpb246IGJvb2xlYW4pOiBQcm9taXNlPHsgd2lkdGg6IG51bWJlcjsgaGVpZ2h0OiBudW1iZXI7IGRhdGE6IFVpbnQ4Q2xhbXBlZEFycmF5IH0+ID0+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICBjb25zdCBzaXplID0gNjAgLy8gQ29uc2lzdGVudCBzaXplIGZvciBhbGwgbWFya2Vyc1xyXG4gICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKVxyXG4gICAgICBjYW52YXMud2lkdGggPSBzaXplXHJcbiAgICAgIGNhbnZhcy5oZWlnaHQgPSBzaXplXHJcbiAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpIVxyXG5cclxuICAgICAgLy8gSWYgbm8gcG9zdGVyLCBjcmVhdGUgZmFsbGJhY2sgaWNvblxyXG4gICAgICBpZiAoIXBvc3RlclBhdGgpIHtcclxuICAgICAgICAvLyBDcmVhdGUgY2lyY3VsYXIgYmFja2dyb3VuZFxyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKVxyXG4gICAgICAgIGN0eC5hcmMoc2l6ZSAvIDIsIHNpemUgLyAyLCBzaXplIC8gMiwgMCwgTWF0aC5QSSAqIDIpXHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjM0I4MkY2J1xyXG4gICAgICAgIGN0eC5maWxsKClcclxuXHJcbiAgICAgICAgLy8gV2hpdGUgYm9yZGVyXHJcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyNGRkZGRkYnXHJcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDNcclxuICAgICAgICBjdHguc3Ryb2tlKClcclxuXHJcbiAgICAgICAgLy8gRmlsbSBpY29uXHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjRkZGRkZGJ1xyXG4gICAgICAgIGN0eC5mb250ID0gJ2JvbGQgMjRweCBBcmlhbCdcclxuICAgICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcidcclxuICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSdcclxuICAgICAgICBjdHguZmlsbFRleHQoJ/CfjqwnLCBzaXplIC8gMiwgc2l6ZSAvIDIpXHJcblxyXG4gICAgICAgIHJlc29sdmUoeyB3aWR0aDogc2l6ZSwgaGVpZ2h0OiBzaXplLCBkYXRhOiBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHNpemUsIHNpemUpLmRhdGEgfSlcclxuICAgICAgICByZXR1cm5cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gTG9hZCBwb3N0ZXIgaW1hZ2VcclxuICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKClcclxuICAgICAgaW1nLmNyb3NzT3JpZ2luID0gJ2Fub255bW91cydcclxuICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAvLyBDcmVhdGUgY2lyY3VsYXIgY2xpcHBpbmcgbWFza1xyXG4gICAgICAgIGN0eC5zYXZlKClcclxuICAgICAgICBjdHguYmVnaW5QYXRoKClcclxuICAgICAgICBjdHguYXJjKHNpemUgLyAyLCBzaXplIC8gMiwgc2l6ZSAvIDIsIDAsIE1hdGguUEkgKiAyKVxyXG4gICAgICAgIGN0eC5jbGlwKClcclxuXHJcbiAgICAgICAgLy8gRHJhdyBwb3N0ZXIgKGNlbnRlcmVkIGFuZCBzY2FsZWQpXHJcbiAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIHNpemUsIHNpemUpXHJcbiAgICAgICAgY3R4LnJlc3RvcmUoKVxyXG5cclxuICAgICAgICAvLyBXaGl0ZSBib3JkZXIgYXJvdW5kIGNpcmNsZVxyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKVxyXG4gICAgICAgIGN0eC5hcmMoc2l6ZSAvIDIsIHNpemUgLyAyLCBzaXplIC8gMiwgMCwgTWF0aC5QSSAqIDIpXHJcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyMxMGJlNTBmZidcclxuICAgICAgICBjdHgubGluZVdpZHRoID0gM1xyXG4gICAgICAgIGN0eC5zdHJva2UoKVxyXG5cclxuICAgICAgICByZXNvbHZlKHsgd2lkdGg6IHNpemUsIGhlaWdodDogc2l6ZSwgZGF0YTogY3R4LmdldEltYWdlRGF0YSgwLCAwLCBzaXplLCBzaXplKS5kYXRhIH0pXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGltZy5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgIC8vIEZhbGxiYWNrIG9uIGVycm9yIC0gY2lyY3VsYXIgaWNvblxyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKVxyXG4gICAgICAgIGN0eC5hcmMoc2l6ZSAvIDIsIHNpemUgLyAyLCBzaXplIC8gMiwgMCwgTWF0aC5QSSAqIDIpXHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjM0I4MkY2J1xyXG4gICAgICAgIGN0eC5maWxsKClcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI0ZGRkZGRidcclxuICAgICAgICBjdHgubGluZVdpZHRoID0gM1xyXG4gICAgICAgIGN0eC5zdHJva2UoKVxyXG5cclxuICAgICAgICAvLyBGaWxtIGljb24gZmFsbGJhY2tcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNGRkZGRkYnXHJcbiAgICAgICAgY3R4LmZvbnQgPSAnYm9sZCAyMHB4IEFyaWFsJ1xyXG4gICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJ1xyXG4gICAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJ1xyXG4gICAgICAgIGN0eC5maWxsVGV4dCgn8J+OrCcsIHNpemUgLyAyLCBzaXplIC8gMilcclxuXHJcbiAgICAgICAgcmVzb2x2ZSh7IHdpZHRoOiBzaXplLCBoZWlnaHQ6IHNpemUsIGRhdGE6IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgc2l6ZSwgc2l6ZSkuZGF0YSB9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBVc2UgdGhlIGZ1bGwgcG9zdGVyIFVSTCBmcm9tIHRoZSBkYXRhXHJcbiAgICAgIGltZy5zcmMgPSBwb3N0ZXJQYXRoXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIG1vdmllIG1hcmtlcnMgZnJvbSBHZW9KU09OIC0gSU5JVElBTCBMT0FEIE9OTFlcclxuICAgKi9cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCFtYXAuY3VycmVudCB8fCBnZW9qc29uRmVhdHVyZXMubGVuZ3RoID09PSAwKSByZXR1cm5cclxuXHJcbiAgICAvLyBPbmx5IHJ1biB0aGlzIGVmZmVjdCBvbmNlIHdoZW4gZGF0YSBpcyBmaXJzdCBsb2FkZWRcclxuICAgIGlmIChpbml0aWFsaXplZFJlZi5jdXJyZW50IHx8IG1hcC5jdXJyZW50LmdldFNvdXJjZSgnbW92aWVzJykpIHJldHVyblxyXG5cclxuICAgIGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVNYXJrZXJzKCkge1xyXG4gICAgICBpZiAoIW1hcC5jdXJyZW50KSByZXR1cm5cclxuXHJcbiAgICAgIC8vIExvYWQgQUxMIHBvc3RlcnMgQkVGT1JFIGFkZGluZyBtYXAgbGF5ZXIgKHByZXZlbnRzIHdhcm5pbmdzKVxyXG4gICAgICBjb25zdCBCQVRDSF9TSVpFID0gMjBcclxuICAgICAgbGV0IGxvYWRlZENvdW50ID0gMFxyXG4gICAgICBjb25zdCBhbGxGZWF0dXJlcyA9IGdlb2pzb25GZWF0dXJlc1xyXG5cclxuICAgICAgLy8gT25seSBzaG93IGxvYWRpbmcgb24gaW5pdGlhbCBzZXR1cCwgbm90IG9uIFN0cmljdE1vZGUgcmUtbW91bnRzXHJcbiAgICAgIGlmICghaW5pdGlhbGl6ZWRSZWYuY3VycmVudCkge1xyXG4gICAgICAgIHNldExvYWRpbmdTdGF0ZSh7XHJcbiAgICAgICAgICBpc0xvYWRpbmc6IHRydWUsXHJcbiAgICAgICAgICBwcm9ncmVzczogOTAsXHJcbiAgICAgICAgICBzdGFnZTogYExvYWRpbmcgcG9zdGVycy4uLiAwLyR7YWxsRmVhdHVyZXMubGVuZ3RofWBcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBMb2FkIHBvc3RlcnMgaW4gYmF0Y2hlcyBhbmQgYXdhaXQgY29tcGxldGlvblxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbEZlYXR1cmVzLmxlbmd0aDsgaSArPSBCQVRDSF9TSVpFKSB7XHJcbiAgICAgICAgY29uc3QgYmF0Y2ggPSBhbGxGZWF0dXJlcy5zbGljZShpLCBpICsgQkFUQ0hfU0laRSlcclxuXHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICAgICAgICBiYXRjaC5tYXAoYXN5bmMgKGZlYXR1cmUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW92aWVJZCA9IGZlYXR1cmUucHJvcGVydGllcy5tb3ZpZV9pZFxyXG4gICAgICAgICAgICBjb25zdCBwb3N0ZXJQYXRoID0gZmVhdHVyZS5wcm9wZXJ0aWVzLnBvc3RlclxyXG4gICAgICAgICAgICBjb25zdCBpc011bHRpTG9jYXRpb24gPSBmZWF0dXJlLnByb3BlcnRpZXMubG9jYXRpb25zX2NvdW50ID4gMVxyXG4gICAgICAgICAgICBjb25zdCBpY29uTmFtZSA9IGBwb3N0ZXItJHttb3ZpZUlkfWBcclxuXHJcbiAgICAgICAgICAgIGlmICghbWFwLmN1cnJlbnQhLmhhc0ltYWdlKGljb25OYW1lKSkge1xyXG4gICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwb3N0ZXJJY29uID0gYXdhaXQgY3JlYXRlUG9zdGVySWNvbihwb3N0ZXJQYXRoLCBtb3ZpZUlkLCBpc011bHRpTG9jYXRpb24pXHJcbiAgICAgICAgICAgICAgICBtYXAuY3VycmVudCEuYWRkSW1hZ2UoaWNvbk5hbWUsIHBvc3Rlckljb24pXHJcbiAgICAgICAgICAgICAgICBsb2FkZWRJbWFnZXNSZWYuY3VycmVudC5hZGQoaWNvbk5hbWUpIC8vIE1hcmsgYXMgbG9hZGVkXHJcbiAgICAgICAgICAgICAgICBsb2FkZWRDb3VudCsrXHJcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBhZGQgcG9zdGVyIGljb24gZm9yICR7bW92aWVJZH06YCwgZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAvLyBBZGQgZmFsbGJhY2sgaWNvbiBvbiBlcnJvclxyXG4gICAgICAgICAgICAgICAgY29uc3QgZmFsbGJhY2tJY29uID0gYXdhaXQgY3JlYXRlUG9zdGVySWNvbihudWxsLCBtb3ZpZUlkLCBpc011bHRpTG9jYXRpb24pXHJcbiAgICAgICAgICAgICAgICBtYXAuY3VycmVudCEuYWRkSW1hZ2UoaWNvbk5hbWUsIGZhbGxiYWNrSWNvbilcclxuICAgICAgICAgICAgICAgIGxvYWRlZEltYWdlc1JlZi5jdXJyZW50LmFkZChpY29uTmFtZSkgLy8gTWFyayBhcyBsb2FkZWRcclxuICAgICAgICAgICAgICAgIGxvYWRlZENvdW50KytcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgbG9hZGVkQ291bnQrK1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHByb2dyZXNzIGFmdGVyIGVhY2ggYmF0Y2hcclxuICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgucm91bmQoKGxvYWRlZENvdW50IC8gYWxsRmVhdHVyZXMubGVuZ3RoKSAqIDEwMClcclxuICAgICAgICBzZXRMb2FkaW5nU3RhdGUoe1xyXG4gICAgICAgICAgaXNMb2FkaW5nOiB0cnVlLFxyXG4gICAgICAgICAgcHJvZ3Jlc3M6IDkwICsgKHByb2dyZXNzICogMC4wOSksIC8vIDkwLTk5JSByYW5nZVxyXG4gICAgICAgICAgc3RhZ2U6IGBMb2FkaW5nIHBvc3RlcnMuLi4gJHtsb2FkZWRDb3VudH0vJHthbGxGZWF0dXJlcy5sZW5ndGh9YFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFNob3cgcmVuZGVyaW5nIHN0YWdlIG9ubHkgb24gaW5pdGlhbCBzZXR1cFxyXG4gICAgICBpZiAoIWluaXRpYWxpemVkUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICBzZXRMb2FkaW5nU3RhdGUoe1xyXG4gICAgICAgICAgaXNMb2FkaW5nOiB0cnVlLFxyXG4gICAgICAgICAgcHJvZ3Jlc3M6IDk5LFxyXG4gICAgICAgICAgc3RhZ2U6ICdSZW5kZXJpbmcgbWFya2Vycy4uLidcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBDb252ZXJ0IE11bHRpUG9pbnQgZmVhdHVyZXMgaW50byBpbmRpdmlkdWFsIFBvaW50IGZlYXR1cmVzIGZvciBlYWNoIGxvY2F0aW9uXHJcbiAgICAgIGNvbnN0IGRpc3BsYXlGZWF0dXJlczogYW55W10gPSBbXVxyXG5cclxuICAgICAgYWxsRmVhdHVyZXMuZm9yRWFjaChmZWF0dXJlID0+IHtcclxuICAgICAgICBpZiAoZmVhdHVyZS5nZW9tZXRyeS50eXBlID09PSAnTXVsdGlQb2ludCcpIHtcclxuICAgICAgICAgIC8vIENyZWF0ZSBhIHNlcGFyYXRlIGZlYXR1cmUgZm9yIGVhY2ggbG9jYXRpb25cclxuICAgICAgICAgIGNvbnN0IGNvb3JkcyA9IGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXMgYXMgbnVtYmVyW11bXVxyXG4gICAgICAgICAgY29vcmRzLmZvckVhY2goKGNvb3JkLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBkaXNwbGF5RmVhdHVyZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgLi4uZmVhdHVyZSxcclxuICAgICAgICAgICAgICBpZDogYCR7ZmVhdHVyZS5pZH0tbG9jLSR7aW5kZXh9YCxcclxuICAgICAgICAgICAgICBnZW9tZXRyeToge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BvaW50JyBhcyBjb25zdCxcclxuICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIFNpbmdsZSBsb2NhdGlvbiAtIGtlZXAgYXMgaXNcclxuICAgICAgICAgIGRpc3BsYXlGZWF0dXJlcy5wdXNoKGZlYXR1cmUpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgLy8gQ3JlYXRlIEdlb0pTT04gZm9yIGRpc3BsYXlcclxuICAgICAgY29uc3QgZ2VvanNvbjogR2VvSlNPTi5GZWF0dXJlQ29sbGVjdGlvbiA9IHtcclxuICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLFxyXG4gICAgICAgIGZlYXR1cmVzOiBkaXNwbGF5RmVhdHVyZXMgYXMgYW55XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEFkZCBzb3VyY2UgLSBESVNBQkxFIGNsdXN0ZXJpbmcgc28gbWFya2VycyBzdGF5IHZpc2libGVcclxuICAgICAgbWFwLmN1cnJlbnQhLmFkZFNvdXJjZSgnbW92aWVzJywge1xyXG4gICAgICAgIHR5cGU6ICdnZW9qc29uJyxcclxuICAgICAgICBkYXRhOiBnZW9qc29uLFxyXG4gICAgICAgIC8vIENsdXN0ZXJpbmcgZGlzYWJsZWQgLSB3ZSB3YW50IHRvIHNlZSBhbGwgbWFya2Vyc1xyXG4gICAgICAgIGNsdXN0ZXI6IGZhbHNlLFxyXG4gICAgICB9KVxyXG5cclxuICAgICAgLy8gQWRkIGFsbCBtb3ZpZSBtYXJrZXJzIGxheWVyIChub3cgZWFjaCBtYXJrZXIgcmVwcmVzZW50cyBvbmUgYWN0dWFsIGxvY2F0aW9uKVxyXG4gICAgICBtYXAuY3VycmVudCEuYWRkTGF5ZXIoe1xyXG4gICAgICAgIGlkOiAnbW92aWUtbWFya2VycycsXHJcbiAgICAgICAgdHlwZTogJ3N5bWJvbCcsXHJcbiAgICAgICAgc291cmNlOiAnbW92aWVzJyxcclxuICAgICAgICBsYXlvdXQ6IHtcclxuICAgICAgICAgICdpY29uLWltYWdlJzogWydjb25jYXQnLCAncG9zdGVyLScsIFsnZ2V0JywgJ21vdmllX2lkJ11dLFxyXG4gICAgICAgICAgJ2ljb24tc2l6ZSc6IDAuNyxcclxuICAgICAgICAgICdpY29uLWFsbG93LW92ZXJsYXAnOiB0cnVlLFxyXG4gICAgICAgICAgJ3RleHQtZmllbGQnOiBbJ2dldCcsICd0aXRsZSddLFxyXG4gICAgICAgICAgJ3RleHQtZm9udCc6IFsnT3BlbiBTYW5zIEJvbGQnLCAnQXJpYWwgVW5pY29kZSBNUyBCb2xkJ10sXHJcbiAgICAgICAgICAndGV4dC1zaXplJzogMTQsXHJcbiAgICAgICAgICAndGV4dC1vZmZzZXQnOiBbMCwgMi44XSxcclxuICAgICAgICAgICd0ZXh0LWFuY2hvcic6ICd0b3AnLFxyXG4gICAgICAgICAgJ3RleHQtbWF4LXdpZHRoJzogMTIsXHJcbiAgICAgICAgICAndGV4dC1hbGxvdy1vdmVybGFwJzogZmFsc2VcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBhaW50OiB7XHJcbiAgICAgICAgICAndGV4dC1jb2xvcic6ICcjMTBiZTUwZmYnLFxyXG4gICAgICAgICAgJ3RleHQtaGFsby1jb2xvcic6ICcjMUYyOTM3JyxcclxuICAgICAgICAgICd0ZXh0LWhhbG8td2lkdGgnOiAyLjUsXHJcbiAgICAgICAgICAndGV4dC1oYWxvLWJsdXInOiAxXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgLy8gQWxsIGRvbmUgLSBoaWRlIGxvYWRpbmcgc2NyZWVuIG9ubHkgb24gaW5pdGlhbCBzZXR1cFxyXG4gICAgICBpZiAoIWluaXRpYWxpemVkUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIHNldExvYWRpbmdTdGF0ZSh7IGlzTG9hZGluZzogZmFsc2UsIHByb2dyZXNzOiAxMDAsIHN0YWdlOiAnQ29tcGxldGUnIH0pXHJcbiAgICAgICAgICBpbml0aWFsaXplZFJlZi5jdXJyZW50ID0gdHJ1ZVxyXG4gICAgICAgIH0sIDMwMCkgLy8gU21hbGwgZGVsYXkgZm9yIHNtb290aCB0cmFuc2l0aW9uXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEFkZCB1bmlmaWVkIGNsaWNrIGhhbmRsZXIgZm9yIGFsbCBtb3ZpZSBtYXJrZXJzXHJcbiAgICAgIGNvbnN0IGhhbmRsZU1hcmtlckNsaWNrID0gKGU6IGFueSkgPT4ge1xyXG4gICAgICAgIGlmICghZS5mZWF0dXJlcyB8fCBlLmZlYXR1cmVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuXHJcblxyXG4gICAgICAgIGNvbnN0IGZlYXR1cmUgPSBlLmZlYXR1cmVzWzBdXHJcblxyXG4gICAgICAgIC8vIFRyeSB0byBmaW5kIGluIGdlb2pzb25GZWF0dXJlcyBieSBtb3ZpZV9pZFxyXG4gICAgICAgIGNvbnN0IGZlYXR1cmVCeU1vdmllSWQgPSBnZW9qc29uRmVhdHVyZXMuZmluZChmID0+IGYucHJvcGVydGllcy5tb3ZpZV9pZCA9PT0gZmVhdHVyZS5wcm9wZXJ0aWVzLm1vdmllX2lkKVxyXG5cclxuICAgICAgICBpZiAoZmVhdHVyZUJ5TW92aWVJZCkge1xyXG4gICAgICAgICAgY29uc3QgbW92aWVGcm9tRmVhdHVyZSA9IGNvbnZlcnRGZWF0dXJlVG9Nb3ZpZShmZWF0dXJlQnlNb3ZpZUlkKVxyXG4gICAgICAgICAgb25Nb3ZpZVNlbGVjdChtb3ZpZUZyb21GZWF0dXJlKVxyXG4gICAgICAgICAgLy8gRG9uJ3QgYXV0b21hdGljYWxseSBzaG93IGFsbCBsb2NhdGlvbnMgLSBsZXQgdXNlciBjbGljayBcIlNob3cgQWxsIG9uIE1hcFwiIGJ1dHRvblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBMYXN0IHJlc29ydDogY3JlYXRlIGEgbWluaW1hbCBtb3ZpZSBvYmplY3RcclxuICAgICAgICAgIGNvbnN0IG1vdmllRnJvbUNsaWNrID0ge1xyXG4gICAgICAgICAgICBtb3ZpZV9pZDogZmVhdHVyZS5wcm9wZXJ0aWVzLm1vdmllX2lkLFxyXG4gICAgICAgICAgICB0aXRsZTogZmVhdHVyZS5wcm9wZXJ0aWVzLnRpdGxlLFxyXG4gICAgICAgICAgICB5ZWFyOiBmZWF0dXJlLnByb3BlcnRpZXMueWVhcixcclxuICAgICAgICAgICAgaW1kYl9pZDogZmVhdHVyZS5wcm9wZXJ0aWVzLm1vdmllX2lkLFxyXG4gICAgICAgICAgICB0bWRiX2lkOiBTdHJpbmcoZmVhdHVyZS5wcm9wZXJ0aWVzLnRtZGJfaWQpLFxyXG4gICAgICAgICAgICBnZW5yZXM6IGZlYXR1cmUucHJvcGVydGllcy5nZW5yZXMgfHwgKGZlYXR1cmUucHJvcGVydGllcy50b3BfZ2VucmUgPyBbZmVhdHVyZS5wcm9wZXJ0aWVzLnRvcF9nZW5yZV0gOiBbXSksXHJcbiAgICAgICAgICAgIHBvc3RlcjogZmVhdHVyZS5wcm9wZXJ0aWVzLnBvc3RlciB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHRyYWlsZXI6IGZlYXR1cmUucHJvcGVydGllcy50cmFpbGVyIHx8IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgaW1kYl9yYXRpbmc6IGZlYXR1cmUucHJvcGVydGllcy5pbWRiX3JhdGluZyB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uczogW3tcclxuICAgICAgICAgICAgICBsYXQ6IDAsXHJcbiAgICAgICAgICAgICAgbG5nOiAwLFxyXG4gICAgICAgICAgICAgIGNpdHk6ICdVbmtub3duJyxcclxuICAgICAgICAgICAgICBjb3VudHJ5OiAnVW5rbm93bicsXHJcbiAgICAgICAgICAgIH1dLCAvLyBNaW5pbWFsIGxvY2F0aW9uIHRvIHByZXZlbnQgY3Jhc2hcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG9uTW92aWVTZWxlY3QobW92aWVGcm9tQ2xpY2sgYXMgTW92aWUpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBtYXAuY3VycmVudCEub24oJ2NsaWNrJywgJ21vdmllLW1hcmtlcnMnLCBoYW5kbGVNYXJrZXJDbGljaylcclxuXHJcbiAgICAgIC8vIENsZWFyIGZvY3VzIHdoZW4gY2xpY2tpbmcgb24gZW1wdHkgbWFwIChub3Qgb24gbWFya2VycylcclxuICAgICAgY29uc3QgaGFuZGxlTWFwQ2xpY2sgPSAoZTogYW55KSA9PiB7XHJcbiAgICAgICAgLy8gT25seSBjbGVhciBmb2N1cyBpZiBjbGlja2luZyBvbiBlbXB0eSBzcGFjZSAobm90IG9uIG1hcmtlcnMpXHJcbiAgICAgICAgaWYgKCFlLmZlYXR1cmVzIHx8IGUuZmVhdHVyZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICBpZiAoZm9jdXNlZE1vdmllSWQgJiYgb25DbGVhckZvY3VzKSB7XHJcbiAgICAgICAgICAgIG9uQ2xlYXJGb2N1cygpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBtYXAuY3VycmVudCEub24oJ2NsaWNrJywgaGFuZGxlTWFwQ2xpY2spXHJcblxyXG4gICAgICAvLyBDaGFuZ2UgY3Vyc29yIG9uIGhvdmVyXHJcbiAgICAgIG1hcC5jdXJyZW50IS5vbignbW91c2VlbnRlcicsICdtb3ZpZS1tYXJrZXJzJywgKCkgPT4ge1xyXG4gICAgICAgIG1hcC5jdXJyZW50IS5nZXRDYW52YXMoKS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcidcclxuICAgICAgfSlcclxuICAgICAgbWFwLmN1cnJlbnQhLm9uKCdtb3VzZWxlYXZlJywgJ21vdmllLW1hcmtlcnMnLCAoKSA9PiB7XHJcbiAgICAgICAgbWFwLmN1cnJlbnQhLmdldENhbnZhcygpLnN0eWxlLmN1cnNvciA9ICcnXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLy8gV2FpdCBmb3Igc3R5bGUgdG8gYmUgbG9hZGVkXHJcbiAgICBpZiAoIW1hcC5jdXJyZW50LmlzU3R5bGVMb2FkZWQoKSkge1xyXG4gICAgICBtYXAuY3VycmVudC5vbignbG9hZCcsICgpID0+IHtcclxuICAgICAgICBpbml0aWFsaXplTWFya2VycygpXHJcbiAgICAgIH0pXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpbml0aWFsaXplTWFya2VycygpXHJcbiAgICB9XHJcbiAgfSwgW2dlb2pzb25GZWF0dXJlc10pIC8vIE9ubHkgZGVwZW5kIG9uIGdlb2pzb25GZWF0dXJlcyAtIHJ1biBvbmNlIHdoZW4gZGF0YSBsb2Fkc1xyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGUgdmlzaWJsZSBtYXJrZXJzIGJhc2VkIG9uIGZpbHRlcnMgYW5kIGZvY3VzIC0gTk8gUkVCVUlMRElOR1xyXG4gICAqL1xyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIW1hcC5jdXJyZW50IHx8ICFtYXAuY3VycmVudC5nZXRTb3VyY2UoJ21vdmllcycpKSByZXR1cm5cclxuXHJcbiAgICBsZXQgZmlsdGVyZWRGZWF0dXJlczogR2VvSlNPTkZlYXR1cmVbXVxyXG5cclxuICAgIC8vIElmIGEgbW92aWUgaXMgZm9jdXNlZCwgT05MWSBzaG93IHRoYXQgbW92aWUncyBtYXJrZXJzIChpZ25vcmUgYWxsIG90aGVyIGZpbHRlcnMpXHJcbiAgICBpZiAoZm9jdXNlZE1vdmllSWQpIHtcclxuICAgICAgZmlsdGVyZWRGZWF0dXJlcyA9IGdlb2pzb25GZWF0dXJlcy5maWx0ZXIoZiA9PiBmLnByb3BlcnRpZXMubW92aWVfaWQgPT09IGZvY3VzZWRNb3ZpZUlkKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gTm9ybWFsIG1vZGU6IGFwcGx5IHNlYXJjaCBhbmQgZmlsdGVyIGxvZ2ljXHJcbiAgICAgIGNvbnN0IGZpbHRlcmVkTW92aWVzID0gZmlsdGVyTW92aWVzKG1vdmllcywgZmlsdGVycylcclxuICAgICAgY29uc3QgZmlsdGVyZWRJZHMgPSBuZXcgU2V0KGZpbHRlcmVkTW92aWVzLm1hcChtID0+IG0ubW92aWVfaWQpKVxyXG5cclxuICAgICAgZmlsdGVyZWRGZWF0dXJlcyA9IG1vdmllcy5sZW5ndGggPiAwXHJcbiAgICAgICAgPyBnZW9qc29uRmVhdHVyZXMuZmlsdGVyKGYgPT4gZmlsdGVyZWRJZHMuaGFzKGYucHJvcGVydGllcy5tb3ZpZV9pZCkpXHJcbiAgICAgICAgOiBnZW9qc29uRmVhdHVyZXNcclxuICAgIH1cclxuXHJcbiAgICAvLyBDb252ZXJ0IE11bHRpUG9pbnQgZmVhdHVyZXMgaW50byBpbmRpdmlkdWFsIFBvaW50IGZlYXR1cmVzXHJcbiAgICBjb25zdCBkaXNwbGF5RmVhdHVyZXM6IGFueVtdID0gW11cclxuXHJcbiAgICBmaWx0ZXJlZEZlYXR1cmVzLmZvckVhY2goZmVhdHVyZSA9PiB7XHJcbiAgICAgIGlmIChmZWF0dXJlLmdlb21ldHJ5LnR5cGUgPT09ICdNdWx0aVBvaW50Jykge1xyXG4gICAgICAgIGNvbnN0IGNvb3JkcyA9IGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXMgYXMgbnVtYmVyW11bXVxyXG4gICAgICAgIGNvb3Jkcy5mb3JFYWNoKChjb29yZCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgIGRpc3BsYXlGZWF0dXJlcy5wdXNoKHtcclxuICAgICAgICAgICAgLi4uZmVhdHVyZSxcclxuICAgICAgICAgICAgaWQ6IGAke2ZlYXR1cmUuaWR9LWxvYy0ke2luZGV4fWAsXHJcbiAgICAgICAgICAgIGdlb21ldHJ5OiB7XHJcbiAgICAgICAgICAgICAgdHlwZTogJ1BvaW50JyBhcyBjb25zdCxcclxuICAgICAgICAgICAgICBjb29yZGluYXRlczogY29vcmRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRpc3BsYXlGZWF0dXJlcy5wdXNoKGZlYXR1cmUpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgLy8gVXBkYXRlIHRoZSBkYXRhIHNvdXJjZSBXSVRIT1VUIHJlYnVpbGRpbmcgbGF5ZXJzIC0gSU5TVEFOVCFcclxuICAgIGNvbnN0IGdlb2pzb246IEdlb0pTT04uRmVhdHVyZUNvbGxlY3Rpb24gPSB7XHJcbiAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsXHJcbiAgICAgIGZlYXR1cmVzOiBkaXNwbGF5RmVhdHVyZXMgYXMgYW55XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc291cmNlID0gbWFwLmN1cnJlbnQuZ2V0U291cmNlKCdtb3ZpZXMnKSBhcyBtYXBsaWJyZWdsLkdlb0pTT05Tb3VyY2VcclxuICAgIGlmIChzb3VyY2UgJiYgc291cmNlLnNldERhdGEpIHtcclxuICAgICAgc291cmNlLnNldERhdGEoZ2VvanNvbilcclxuICAgIH1cclxuICB9LCBbZ2VvanNvbkZlYXR1cmVzLCBtb3ZpZXMsIGZpbHRlcnMsIGZvY3VzZWRNb3ZpZUlkXSkgLy8gVXBkYXRlIGRhdGEgd2hlbiBmaWx0ZXJzL2ZvY3VzIGNoYW5nZVxyXG5cclxuICAvKipcclxuICAgKiBDbGVhciBjb25uZWN0aW5nIGxpbmVzIHdoZW4gZm9jdXMgaXMgcmVtb3ZlZFxyXG4gICAqL1xyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIW1hcC5jdXJyZW50KSByZXR1cm5cclxuXHJcbiAgICAvLyBXaGVuIGZvY3VzZWRNb3ZpZUlkIGlzIGNsZWFyZWQsIHJlbW92ZSB0aGUgY29ubmVjdGluZyBsaW5lc1xyXG4gICAgaWYgKCFmb2N1c2VkTW92aWVJZCkge1xyXG4gICAgICBpZiAobWFwLmN1cnJlbnQuZ2V0TGF5ZXIoJ2Nvbm5lY3RpbmctbGluZScpKSB7XHJcbiAgICAgICAgbWFwLmN1cnJlbnQucmVtb3ZlTGF5ZXIoJ2Nvbm5lY3RpbmctbGluZScpXHJcbiAgICAgIH1cclxuICAgICAgaWYgKG1hcC5jdXJyZW50LmdldFNvdXJjZSgnY29ubmVjdGluZy1saW5lJykpIHtcclxuICAgICAgICBtYXAuY3VycmVudC5yZW1vdmVTb3VyY2UoJ2Nvbm5lY3RpbmctbGluZScpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCBbZm9jdXNlZE1vdmllSWRdKVxyXG5cclxuICAvKipcclxuICAgKiBIYW5kbGUgc2VsZWN0ZWQgbW92aWVcclxuICAgKi9cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCFtYXAuY3VycmVudCB8fCAhc2VsZWN0ZWRNb3ZpZSkgcmV0dXJuXHJcblxyXG4gICAgY29uc3QgYm91bmRzID0gbmV3IG1hcGxpYnJlZ2wuTG5nTGF0Qm91bmRzKClcclxuICAgIHNlbGVjdGVkTW92aWUubG9jYXRpb25zLmZvckVhY2goKGxvY2F0aW9uKSA9PiB7XHJcbiAgICAgIGJvdW5kcy5leHRlbmQoW2xvY2F0aW9uLmxuZywgbG9jYXRpb24ubGF0XSlcclxuICAgIH0pXHJcblxyXG4gICAgbWFwLmN1cnJlbnQuZml0Qm91bmRzKGJvdW5kcywge1xyXG4gICAgICBwYWRkaW5nOiAxMDAsXHJcbiAgICAgIGR1cmF0aW9uOiAxMDAwLFxyXG4gICAgfSlcclxuICB9LCBbc2VsZWN0ZWRNb3ZpZV0pXHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIm1hcC1jb250YWluZXJcIj5cclxuICAgICAgey8qIFN0YXJzIGJhY2tncm91bmQgKi99XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3RhcnMtYmFja2dyb3VuZFwiIC8+XHJcblxyXG4gICAgICB7LyogTWFwIGNvbnRhaW5lciAqL31cclxuICAgICAgPGRpdiByZWY9e21hcENvbnRhaW5lcn0gc3R5bGU9e3sgd2lkdGg6ICcxMDAlJywgaGVpZ2h0OiAnMTAwJScsIHBvc2l0aW9uOiAncmVsYXRpdmUnLCB6SW5kZXg6IDEgfX0gLz5cclxuXHJcbiAgICAgIHsvKiBMb2FkaW5nIFNjcmVlbiBPdmVybGF5IC0gT25seSBzaG93IG9uIGluaXRpYWwgbG9hZCAqL31cclxuICAgICAge2xvYWRpbmdTdGF0ZS5pc0xvYWRpbmcgJiYgIWluaXRpYWxpemVkUmVmLmN1cnJlbnQgJiYgKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCB6LTUwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLWdyYWRpZW50LXRvLWJyIGZyb20tZ3JheS05MDAgdmlhLXB1cnBsZS05MDAgdG8tZ3JheS05MDBcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgc3BhY2UteS02IHB4LThcIj5cclxuICAgICAgICAgICAgey8qIE1vdmllIGVtb2ppIGFuaW1hdGlvbiAqL31cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LTd4bCBhbmltYXRlLWJvdW5jZVwiPlxyXG4gICAgICAgICAgICAgIPCfjqxcclxuICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICB7LyogVGl0bGUgKi99XHJcbiAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTN4bCBmb250LWJvbGQgdGV4dC13aGl0ZVwiPlxyXG4gICAgICAgICAgICAgIENpbmVNYXBcclxuICAgICAgICAgICAgPC9oMj5cclxuXHJcbiAgICAgICAgICAgIHsvKiBMb2FkaW5nIHN0YWdlIHRleHQgKi99XHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteGwgdGV4dC1ncmF5LTMwMFwiPlxyXG4gICAgICAgICAgICAgIHtsb2FkaW5nU3RhdGUuc3RhZ2V9XHJcbiAgICAgICAgICAgIDwvcD5cclxuXHJcbiAgICAgICAgICAgIHsvKiBQcm9ncmVzcyBiYXIgKi99XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy04MCBiZy1ncmF5LTcwMCByb3VuZGVkLWZ1bGwgaC0zIG92ZXJmbG93LWhpZGRlblwiPlxyXG4gICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWdyYWRpZW50LXRvLXIgZnJvbS1wcmltYXJ5LTUwMCB0by1wdXJwbGUtNjAwIGgtZnVsbCB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDAgZWFzZS1vdXRcIlxyXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAke2xvYWRpbmdTdGF0ZS5wcm9ncmVzc30lYCB9fVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgey8qIFByb2dyZXNzIHBlcmNlbnRhZ2UgKi99XHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTQwMCBmb250LW1vbm9cIj5cclxuICAgICAgICAgICAgICB7TWF0aC5yb3VuZChsb2FkaW5nU3RhdGUucHJvZ3Jlc3MpfSVcclxuICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICl9XHJcblxyXG4gICAgICB7LyogTW92aWUgY291bnQgYmFkZ2UgKi99XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTIwIGxlZnQtNCB6LTEwIGJnLWJsYWNrLzcwIGJhY2tkcm9wLWJsdXItc20gdGV4dC13aGl0ZSBweC00IHB5LTIgcm91bmRlZC1sZyBzaGFkb3cteGwgYm9yZGVyIGJvcmRlci13aGl0ZS8xMFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtMnhsXCI+8J+OrDwvc3Bhbj5cclxuICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTMwMFwiPlRvdGFsIE1vdmllczwvcD5cclxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LWJvbGRcIj5cclxuICAgICAgICAgICAgICB7bW92aWVzLmxlbmd0aH1cclxuICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgKVxyXG59KVxyXG5cclxuTWFwLmRpc3BsYXlOYW1lID0gJ01hcCdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IE1hcFxyXG4iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlU3RhdGUiLCJ1c2VJbXBlcmF0aXZlSGFuZGxlIiwiZm9yd2FyZFJlZiIsIm1hcGxpYnJlZ2wiLCJmaWx0ZXJNb3ZpZXMiLCJNYXAiLCJzZWxlY3RlZE1vdmllIiwib25Nb3ZpZVNlbGVjdCIsInNlYXJjaFF1ZXJ5IiwiX3NlYXJjaFF1ZXJ5IiwiZmlsdGVycyIsImZvY3VzZWRNb3ZpZUlkIiwib25DbGVhckZvY3VzIiwicmVmIiwibWFwQ29udGFpbmVyIiwibWFwIiwibW92aWVzIiwic2V0TW92aWVzIiwiZ2VvanNvbkZlYXR1cmVzIiwic2V0R2VvanNvbkZlYXR1cmVzIiwiaW5pdGlhbGl6ZWRSZWYiLCJsb2FkZWRJbWFnZXNSZWYiLCJTZXQiLCJsb2FkaW5nU3RhdGUiLCJzZXRMb2FkaW5nU3RhdGUiLCJpc0xvYWRpbmciLCJwcm9ncmVzcyIsInN0YWdlIiwic2hvd0FsbExvY2F0aW9uc0Zvck1vdmllIiwibW92aWUiLCJjb25zb2xlIiwibG9nIiwibW92aWVJZCIsIm1vdmllX2lkIiwiaGFzTWFwIiwiY3VycmVudCIsImZlYXR1cmVzTGVuZ3RoIiwibGVuZ3RoIiwiZXJyb3IiLCJmZWF0dXJlIiwiZmluZCIsImYiLCJwcm9wZXJ0aWVzIiwiY29vcmRpbmF0ZXMiLCJnZW9tZXRyeSIsInR5cGUiLCJib3VuZHMiLCJMbmdMYXRCb3VuZHMiLCJmb3JFYWNoIiwiY29vcmQiLCJleHRlbmQiLCJmaXRCb3VuZHMiLCJwYWRkaW5nIiwibWF4Wm9vbSIsImR1cmF0aW9uIiwiZ2V0TGF5ZXIiLCJyZW1vdmVMYXllciIsImdldFNvdXJjZSIsInJlbW92ZVNvdXJjZSIsImFkZFNvdXJjZSIsImRhdGEiLCJhZGRMYXllciIsImlkIiwic291cmNlIiwicGFpbnQiLCJmbHlUb0xvY2F0aW9uIiwibGF0IiwibG5nIiwidGFyZ2V0Wm9vbSIsInNldFByb2plY3Rpb24iLCJmbHlUbyIsImNlbnRlciIsInpvb20iLCJlc3NlbnRpYWwiLCJzZXRUaW1lb3V0IiwiZWFzZVRvIiwicmVzZXRWaWV3IiwiY29udmVydEZlYXR1cmVUb01vdmllIiwibG9jYXRpb25zIiwiY2l0eSIsImxvY2F0aW9uX25hbWVzIiwic3BsaXQiLCJjb3VudHJ5IiwidHJpbSIsImRlc2NyaXB0aW9uIiwibWF0Y2giLCJjb29yZHMiLCJpZHgiLCJsb2NhdGlvbk5hbWUiLCJzIiwidGl0bGUiLCJ5ZWFyIiwiaW1kYl9pZCIsInRtZGJfaWQiLCJTdHJpbmciLCJnZW5yZXMiLCJ0b3BfZ2VucmUiLCJwb3N0ZXIiLCJ1bmRlZmluZWQiLCJ0cmFpbGVyIiwiaW1kYl9yYXRpbmciLCJsb2FkRGF0YSIsImdlb2pzb25SZXNwb25zZSIsImZldGNoIiwiZ2VvanNvbkRhdGEiLCJqc29uIiwiZmVhdHVyZXMiLCJtb3ZpZXNGcm9tR2VvSlNPTiIsImNvbnRhaW5lciIsInN0eWxlIiwiaXNVc2VySW50ZXJhY3RpbmciLCJyb3RhdGlvbkFuaW1hdGlvbiIsInN0YXJ0Um90YXRpb24iLCJyb3RhdGVDYW1lcmEiLCJfdGltZXN0YW1wIiwic2Vjb25kc1BlclJldm9sdXRpb24iLCJnZXRDZW50ZXIiLCJzZXRDZW50ZXIiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzdG9wUm90YXRpb24iLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsIm9uIiwic2F2ZWRTdGF0ZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJKU09OIiwicGFyc2UiLCJzZXRab29tIiwiZSIsInNhdmVUaW1lb3V0Iiwic2F2ZU1hcFN0YXRlIiwiZ2V0Wm9vbSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJjbGVhclRpbWVvdXQiLCJhZGRDb250cm9sIiwiTmF2aWdhdGlvbkNvbnRyb2wiLCJGdWxsc2NyZWVuQ29udHJvbCIsInJlbW92ZSIsImNyZWF0ZVBvc3Rlckljb24iLCJwb3N0ZXJQYXRoIiwiX21vdmllSWQiLCJfaXNNdWx0aUxvY2F0aW9uIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzaXplIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwid2lkdGgiLCJoZWlnaHQiLCJjdHgiLCJnZXRDb250ZXh0IiwiYmVnaW5QYXRoIiwiYXJjIiwiTWF0aCIsIlBJIiwiZmlsbFN0eWxlIiwiZmlsbCIsInN0cm9rZVN0eWxlIiwibGluZVdpZHRoIiwic3Ryb2tlIiwiZm9udCIsInRleHRBbGlnbiIsInRleHRCYXNlbGluZSIsImZpbGxUZXh0IiwiZ2V0SW1hZ2VEYXRhIiwiaW1nIiwiSW1hZ2UiLCJjcm9zc09yaWdpbiIsIm9ubG9hZCIsInNhdmUiLCJjbGlwIiwiZHJhd0ltYWdlIiwicmVzdG9yZSIsIm9uZXJyb3IiLCJzcmMiLCJpbml0aWFsaXplTWFya2VycyIsIkJBVENIX1NJWkUiLCJsb2FkZWRDb3VudCIsImFsbEZlYXR1cmVzIiwiaSIsImJhdGNoIiwic2xpY2UiLCJhbGwiLCJpc011bHRpTG9jYXRpb24iLCJsb2NhdGlvbnNfY291bnQiLCJpY29uTmFtZSIsImhhc0ltYWdlIiwicG9zdGVySWNvbiIsImFkZEltYWdlIiwiYWRkIiwiZmFsbGJhY2tJY29uIiwicm91bmQiLCJkaXNwbGF5RmVhdHVyZXMiLCJpbmRleCIsInB1c2giLCJnZW9qc29uIiwiY2x1c3RlciIsImxheW91dCIsImhhbmRsZU1hcmtlckNsaWNrIiwiZmVhdHVyZUJ5TW92aWVJZCIsIm1vdmllRnJvbUZlYXR1cmUiLCJtb3ZpZUZyb21DbGljayIsImhhbmRsZU1hcENsaWNrIiwiZ2V0Q2FudmFzIiwiY3Vyc29yIiwiaXNTdHlsZUxvYWRlZCIsImZpbHRlcmVkRmVhdHVyZXMiLCJmaWx0ZXIiLCJmaWx0ZXJlZE1vdmllcyIsImZpbHRlcmVkSWRzIiwibSIsImhhcyIsInNldERhdGEiLCJsb2NhdGlvbiIsImRpdiIsImNsYXNzTmFtZSIsInBvc2l0aW9uIiwiekluZGV4IiwiaDIiLCJwIiwic3BhbiIsImRpc3BsYXlOYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/components/Map.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/MapWrapper.tsx":
/*!***************************************!*\
  !*** ./src/components/MapWrapper.tsx ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Map */ \"(ssr)/./src/components/Map.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n/**\r\n * MapWrapper - Wrapper to ensure proper ref forwarding with Next.js dynamic imports\r\n */ \n\nconst MapWrapper = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)((props, ref)=>{\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_Map__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n        ...props,\n        ref: ref\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Arturas\\\\Desktop\\\\cinemap\\\\src\\\\components\\\\MapWrapper.tsx\",\n        lineNumber: 22,\n        columnNumber: 10\n    }, undefined);\n});\nMapWrapper.displayName = \"MapWrapper\";\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MapWrapper);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy9NYXBXcmFwcGVyLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBRUE7O0NBRUMsR0FFaUM7QUFDWDtBQWF2QixNQUFNRSwyQkFBYUYsaURBQVVBLENBQW1CLENBQUNHLE9BQU9DO0lBQ3RELHFCQUFPLDhEQUFDSCw0Q0FBR0E7UUFBRSxHQUFHRSxLQUFLO1FBQUVDLEtBQUtBOzs7Ozs7QUFDOUI7QUFFQUYsV0FBV0csV0FBVyxHQUFHO0FBRXpCLGlFQUFlSCxVQUFVQSxFQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2luZW1hcC8uL3NyYy9jb21wb25lbnRzL01hcFdyYXBwZXIudHN4PzEzZmMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXHJcblxyXG4vKipcclxuICogTWFwV3JhcHBlciAtIFdyYXBwZXIgdG8gZW5zdXJlIHByb3BlciByZWYgZm9yd2FyZGluZyB3aXRoIE5leHQuanMgZHluYW1pYyBpbXBvcnRzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgZm9yd2FyZFJlZiB9IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgTWFwIGZyb20gJy4vTWFwJ1xyXG5pbXBvcnQgdHlwZSB7IE1hcFJlZiB9IGZyb20gJy4vTWFwJ1xyXG5pbXBvcnQgdHlwZSB7IE1vdmllLCBGaWx0ZXJTdGF0ZSB9IGZyb20gJy4uL3R5cGVzJ1xyXG5cclxuaW50ZXJmYWNlIE1hcFByb3BzIHtcclxuICBzZWxlY3RlZE1vdmllOiBNb3ZpZSB8IG51bGxcclxuICBvbk1vdmllU2VsZWN0OiAobW92aWU6IE1vdmllIHwgbnVsbCkgPT4gdm9pZFxyXG4gIHNlYXJjaFF1ZXJ5OiBzdHJpbmdcclxuICBmaWx0ZXJzOiBGaWx0ZXJTdGF0ZVxyXG4gIGZvY3VzZWRNb3ZpZUlkPzogc3RyaW5nIHwgbnVsbFxyXG4gIG9uQ2xlYXJGb2N1cz86ICgpID0+IHZvaWRcclxufVxyXG5cclxuY29uc3QgTWFwV3JhcHBlciA9IGZvcndhcmRSZWY8TWFwUmVmLCBNYXBQcm9wcz4oKHByb3BzLCByZWYpID0+IHtcclxuICByZXR1cm4gPE1hcCB7Li4ucHJvcHN9IHJlZj17cmVmfSAvPlxyXG59KVxyXG5cclxuTWFwV3JhcHBlci5kaXNwbGF5TmFtZSA9ICdNYXBXcmFwcGVyJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgTWFwV3JhcHBlclxyXG4iXSwibmFtZXMiOlsiZm9yd2FyZFJlZiIsIk1hcCIsIk1hcFdyYXBwZXIiLCJwcm9wcyIsInJlZiIsImRpc3BsYXlOYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/components/MapWrapper.tsx\n");

/***/ }),

/***/ "(ssr)/./src/utils/helpers.ts":
/*!******************************!*\
  !*** ./src/utils/helpers.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clamp: () => (/* binding */ clamp),\n/* harmony export */   debounce: () => (/* binding */ debounce),\n/* harmony export */   filterMovies: () => (/* binding */ filterMovies),\n/* harmony export */   formatRating: () => (/* binding */ formatRating),\n/* harmony export */   formatYearRange: () => (/* binding */ formatYearRange),\n/* harmony export */   getUniqueCountries: () => (/* binding */ getUniqueCountries),\n/* harmony export */   getUniqueGenres: () => (/* binding */ getUniqueGenres),\n/* harmony export */   getUniqueStreamingPlatforms: () => (/* binding */ getUniqueStreamingPlatforms),\n/* harmony export */   getYouTubeEmbedUrl: () => (/* binding */ getYouTubeEmbedUrl),\n/* harmony export */   getYouTubeVideoId: () => (/* binding */ getYouTubeVideoId)\n/* harmony export */ });\n/**\r\n * General utility functions\r\n */ /**\r\n * Format year range for display\r\n */ const formatYearRange = (start, end)=>{\n    if (start === end) return `${start}`;\n    return `${start}-${end}`;\n};\n/**\r\n * Get unique list of genres from movies\r\n */ const getUniqueGenres = (movies)=>{\n    const genresSet = new Set();\n    movies.forEach((movie)=>{\n        movie.genres.forEach((genre)=>genresSet.add(genre));\n    });\n    return Array.from(genresSet).sort();\n};\n/**\r\n * Get unique list of streaming platforms\r\n */ const getUniqueStreamingPlatforms = (movies)=>{\n    const platformsSet = new Set();\n    movies.forEach((movie)=>{\n        movie.streaming?.forEach((platform)=>platformsSet.add(platform));\n    });\n    return Array.from(platformsSet).sort();\n};\n/**\r\n * Get unique list of countries\r\n */ const getUniqueCountries = (movies)=>{\n    const countriesSet = new Set();\n    movies.forEach((movie)=>{\n        movie.locations.forEach((loc)=>countriesSet.add(loc.country));\n    });\n    return Array.from(countriesSet).sort();\n};\n/**\r\n * Filter movies by criteria\r\n */ const filterMovies = (movies, filters)=>{\n    return movies.filter((movie)=>{\n        // Genre filter\n        if (filters.genres.length > 0) {\n            const hasMatchingGenre = movie.genres.some((genre)=>filters.genres.includes(genre));\n            if (!hasMatchingGenre) return false;\n        }\n        // Decade filter\n        if (movie.year < filters.decades[0] || movie.year > filters.decades[1]) {\n            return false;\n        }\n        // Streaming filter\n        if (filters.streaming.length > 0 && movie.streaming) {\n            const hasMatchingPlatform = movie.streaming.some((platform)=>filters.streaming.includes(platform));\n            if (!hasMatchingPlatform) return false;\n        }\n        return true;\n    });\n};\n/**\r\n * Debounce function for search input\r\n */ const debounce = (func, wait)=>{\n    let timeout = null;\n    return (...args)=>{\n        if (timeout) clearTimeout(timeout);\n        timeout = setTimeout(()=>func(...args), wait);\n    };\n};\n/**\r\n * Format IMDb rating for display\r\n */ const formatRating = (rating)=>{\n    if (!rating) return \"N/A\";\n    return rating.toFixed(1);\n};\n/**\r\n * Extract YouTube video ID from URL\r\n */ const getYouTubeVideoId = (url)=>{\n    if (!url) return null;\n    const match = url.match(/[?&]v=([^&]+)/);\n    return match ? match[1] : null;\n};\n/**\r\n * Generate YouTube embed URL\r\n */ const getYouTubeEmbedUrl = (url)=>{\n    const videoId = getYouTubeVideoId(url);\n    return videoId ? `https://www.youtube.com/embed/${videoId}` : null;\n};\n/**\r\n * Clamp a number between min and max\r\n */ const clamp = (value, min, max)=>{\n    return Math.min(Math.max(value, min), max);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TztJQUNqQixNQUFNQyxRQUFRRCxJQUFJQyxLQUFLLENBQUM7SUFDeEIsT0FBT0EsUUFBUUEsS0FBSyxDQUFDLEVBQUUsR0FBRztBQUM1QixFQUFDO0FBRUQ7O0NBRUMsR0FDTSxNQUFNQyxxQkFBcUIsQ0FBQ0Y7SUFDakMsTUFBTUcsVUFBVUosa0JBQWtCQztJQUNsQyxPQUFPRyxVQUFVLENBQUMsOEJBQThCLEVBQUVBLFFBQVEsQ0FBQyxHQUFHO0FBQ2hFLEVBQUM7QUFFRDs7Q0FFQyxHQUNNLE1BQU1DLFFBQVEsQ0FBQ0MsT0FBZUMsS0FBYUM7SUFDaEQsT0FBT0MsS0FBS0YsR0FBRyxDQUFDRSxLQUFLRCxHQUFHLENBQUNGLE9BQU9DLE1BQU1DO0FBQ3hDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaW5lbWFwLy4vc3JjL3V0aWxzL2hlbHBlcnMudHM/NjlhYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogR2VuZXJhbCB1dGlsaXR5IGZ1bmN0aW9uc1xyXG4gKi9cclxuXHJcbmltcG9ydCB0eXBlIHsgTW92aWUgfSBmcm9tICcuLi90eXBlcydcclxuXHJcbi8qKlxyXG4gKiBGb3JtYXQgeWVhciByYW5nZSBmb3IgZGlzcGxheVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGZvcm1hdFllYXJSYW5nZSA9IChzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHN0cmluZyA9PiB7XHJcbiAgaWYgKHN0YXJ0ID09PSBlbmQpIHJldHVybiBgJHtzdGFydH1gXHJcbiAgcmV0dXJuIGAke3N0YXJ0fS0ke2VuZH1gXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdW5pcXVlIGxpc3Qgb2YgZ2VucmVzIGZyb20gbW92aWVzXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZ2V0VW5pcXVlR2VucmVzID0gKG1vdmllczogcmVhZG9ubHkgTW92aWVbXSk6IHN0cmluZ1tdID0+IHtcclxuICBjb25zdCBnZW5yZXNTZXQgPSBuZXcgU2V0PHN0cmluZz4oKVxyXG4gIG1vdmllcy5mb3JFYWNoKG1vdmllID0+IHtcclxuICAgIG1vdmllLmdlbnJlcy5mb3JFYWNoKGdlbnJlID0+IGdlbnJlc1NldC5hZGQoZ2VucmUpKVxyXG4gIH0pXHJcbiAgcmV0dXJuIEFycmF5LmZyb20oZ2VucmVzU2V0KS5zb3J0KClcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB1bmlxdWUgbGlzdCBvZiBzdHJlYW1pbmcgcGxhdGZvcm1zXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZ2V0VW5pcXVlU3RyZWFtaW5nUGxhdGZvcm1zID0gKG1vdmllczogcmVhZG9ubHkgTW92aWVbXSk6IHN0cmluZ1tdID0+IHtcclxuICBjb25zdCBwbGF0Zm9ybXNTZXQgPSBuZXcgU2V0PHN0cmluZz4oKVxyXG4gIG1vdmllcy5mb3JFYWNoKG1vdmllID0+IHtcclxuICAgIG1vdmllLnN0cmVhbWluZz8uZm9yRWFjaChwbGF0Zm9ybSA9PiBwbGF0Zm9ybXNTZXQuYWRkKHBsYXRmb3JtKSlcclxuICB9KVxyXG4gIHJldHVybiBBcnJheS5mcm9tKHBsYXRmb3Jtc1NldCkuc29ydCgpXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdW5pcXVlIGxpc3Qgb2YgY291bnRyaWVzXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZ2V0VW5pcXVlQ291bnRyaWVzID0gKG1vdmllczogcmVhZG9ubHkgTW92aWVbXSk6IHN0cmluZ1tdID0+IHtcclxuICBjb25zdCBjb3VudHJpZXNTZXQgPSBuZXcgU2V0PHN0cmluZz4oKVxyXG4gIG1vdmllcy5mb3JFYWNoKG1vdmllID0+IHtcclxuICAgIG1vdmllLmxvY2F0aW9ucy5mb3JFYWNoKGxvYyA9PiBjb3VudHJpZXNTZXQuYWRkKGxvYy5jb3VudHJ5KSlcclxuICB9KVxyXG4gIHJldHVybiBBcnJheS5mcm9tKGNvdW50cmllc1NldCkuc29ydCgpXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGaWx0ZXIgbW92aWVzIGJ5IGNyaXRlcmlhXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZmlsdGVyTW92aWVzID0gKFxyXG4gIG1vdmllczogcmVhZG9ubHkgTW92aWVbXSxcclxuICBmaWx0ZXJzOiB7XHJcbiAgICBnZW5yZXM6IHN0cmluZ1tdXHJcbiAgICBkZWNhZGVzOiBbbnVtYmVyLCBudW1iZXJdXHJcbiAgICBzdHJlYW1pbmc6IHN0cmluZ1tdXHJcbiAgfVxyXG4pOiBNb3ZpZVtdID0+IHtcclxuICByZXR1cm4gbW92aWVzLmZpbHRlcihtb3ZpZSA9PiB7XHJcbiAgICAvLyBHZW5yZSBmaWx0ZXJcclxuICAgIGlmIChmaWx0ZXJzLmdlbnJlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnN0IGhhc01hdGNoaW5nR2VucmUgPSBtb3ZpZS5nZW5yZXMuc29tZShnZW5yZSA9PlxyXG4gICAgICAgIGZpbHRlcnMuZ2VucmVzLmluY2x1ZGVzKGdlbnJlKVxyXG4gICAgICApXHJcbiAgICAgIGlmICghaGFzTWF0Y2hpbmdHZW5yZSkgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGVjYWRlIGZpbHRlclxyXG4gICAgaWYgKG1vdmllLnllYXIgPCBmaWx0ZXJzLmRlY2FkZXNbMF0gfHwgbW92aWUueWVhciA+IGZpbHRlcnMuZGVjYWRlc1sxXSkge1xyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuXHJcbiAgICAvLyBTdHJlYW1pbmcgZmlsdGVyXHJcbiAgICBpZiAoZmlsdGVycy5zdHJlYW1pbmcubGVuZ3RoID4gMCAmJiBtb3ZpZS5zdHJlYW1pbmcpIHtcclxuICAgICAgY29uc3QgaGFzTWF0Y2hpbmdQbGF0Zm9ybSA9IG1vdmllLnN0cmVhbWluZy5zb21lKHBsYXRmb3JtID0+XHJcbiAgICAgICAgZmlsdGVycy5zdHJlYW1pbmcuaW5jbHVkZXMocGxhdGZvcm0pXHJcbiAgICAgIClcclxuICAgICAgaWYgKCFoYXNNYXRjaGluZ1BsYXRmb3JtKSByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJ1ZVxyXG4gIH0pXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZWJvdW5jZSBmdW5jdGlvbiBmb3Igc2VhcmNoIGlucHV0XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZGVib3VuY2UgPSA8VCBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gYW55PihcclxuICBmdW5jOiBULFxyXG4gIHdhaXQ6IG51bWJlclxyXG4pOiAoKC4uLmFyZ3M6IFBhcmFtZXRlcnM8VD4pID0+IHZvaWQpID0+IHtcclxuICBsZXQgdGltZW91dDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gfCBudWxsID0gbnVsbFxyXG5cclxuICByZXR1cm4gKC4uLmFyZ3M6IFBhcmFtZXRlcnM8VD4pID0+IHtcclxuICAgIGlmICh0aW1lb3V0KSBjbGVhclRpbWVvdXQodGltZW91dClcclxuICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IGZ1bmMoLi4uYXJncyksIHdhaXQpXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogRm9ybWF0IElNRGIgcmF0aW5nIGZvciBkaXNwbGF5XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZm9ybWF0UmF0aW5nID0gKHJhdGluZz86IG51bWJlcik6IHN0cmluZyA9PiB7XHJcbiAgaWYgKCFyYXRpbmcpIHJldHVybiAnTi9BJ1xyXG4gIHJldHVybiByYXRpbmcudG9GaXhlZCgxKVxyXG59XHJcblxyXG4vKipcclxuICogRXh0cmFjdCBZb3VUdWJlIHZpZGVvIElEIGZyb20gVVJMXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZ2V0WW91VHViZVZpZGVvSWQgPSAodXJsPzogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCA9PiB7XHJcbiAgaWYgKCF1cmwpIHJldHVybiBudWxsXHJcbiAgY29uc3QgbWF0Y2ggPSB1cmwubWF0Y2goL1s/Jl12PShbXiZdKykvKVxyXG4gIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogbnVsbFxyXG59XHJcblxyXG4vKipcclxuICogR2VuZXJhdGUgWW91VHViZSBlbWJlZCBVUkxcclxuICovXHJcbmV4cG9ydCBjb25zdCBnZXRZb3VUdWJlRW1iZWRVcmwgPSAodXJsPzogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCA9PiB7XHJcbiAgY29uc3QgdmlkZW9JZCA9IGdldFlvdVR1YmVWaWRlb0lkKHVybClcclxuICByZXR1cm4gdmlkZW9JZCA/IGBodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8ke3ZpZGVvSWR9YCA6IG51bGxcclxufVxyXG5cclxuLyoqXHJcbiAqIENsYW1wIGEgbnVtYmVyIGJldHdlZW4gbWluIGFuZCBtYXhcclxuICovXHJcbmV4cG9ydCBjb25zdCBjbGFtcCA9ICh2YWx1ZTogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBudW1iZXIgPT4ge1xyXG4gIHJldHVybiBNYXRoLm1pbihNYXRoLm1heCh2YWx1ZSwgbWluKSwgbWF4KVxyXG59XHJcbiJdLCJuYW1lcyI6WyJmb3JtYXRZZWFyUmFuZ2UiLCJzdGFydCIsImVuZCIsImdldFVuaXF1ZUdlbnJlcyIsIm1vdmllcyIsImdlbnJlc1NldCIsIlNldCIsImZvckVhY2giLCJtb3ZpZSIsImdlbnJlcyIsImdlbnJlIiwiYWRkIiwiQXJyYXkiLCJmcm9tIiwic29ydCIsImdldFVuaXF1ZVN0cmVhbWluZ1BsYXRmb3JtcyIsInBsYXRmb3Jtc1NldCIsInN0cmVhbWluZyIsInBsYXRmb3JtIiwiZ2V0VW5pcXVlQ291bnRyaWVzIiwiY291bnRyaWVzU2V0IiwibG9jYXRpb25zIiwibG9jIiwiY291bnRyeSIsImZpbHRlck1vdmllcyIsImZpbHRlcnMiLCJmaWx0ZXIiLCJsZW5ndGgiLCJoYXNNYXRjaGluZ0dlbnJlIiwic29tZSIsImluY2x1ZGVzIiwieWVhciIsImRlY2FkZXMiLCJoYXNNYXRjaGluZ1BsYXRmb3JtIiwiZGVib3VuY2UiLCJmdW5jIiwid2FpdCIsInRpbWVvdXQiLCJhcmdzIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImZvcm1hdFJhdGluZyIsInJhdGluZyIsInRvRml4ZWQiLCJnZXRZb3VUdWJlVmlkZW9JZCIsInVybCIsIm1hdGNoIiwiZ2V0WW91VHViZUVtYmVkVXJsIiwidmlkZW9JZCIsImNsYW1wIiwidmFsdWUiLCJtaW4iLCJtYXgiLCJNYXRoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/utils/helpers.ts\n");

/***/ })

};
;